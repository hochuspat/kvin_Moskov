{"version":3,"sources":["../../src/lib/dom.tsx"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM } from '@vkontakte/vkjs';\nexport { canUseDOM, canUseEventListeners, onDOMLoaded } from '@vkontakte/vkjs';\n\nexport interface DOMContextInterface {\n  /**\n   * @ignore\n   */\n  window?: Window;\n  /**\n   * @ignore\n   */\n  document?: Document;\n}\n\nexport type DOMProps = DOMContextInterface;\n\n/* eslint-disable no-restricted-globals */\nexport const getDOM = () => ({\n  window: canUseDOM ? window : undefined,\n  document: canUseDOM ? document : undefined,\n});\n/* eslint-enable no-restricted-globals */\n\nexport const DOMContext = React.createContext<DOMContextInterface>(getDOM());\n\nexport const useDOM = () => {\n  return React.useContext(DOMContext);\n};\n\nexport function withDOM<Props>(\n  Component: React.ComponentType<Props & DOMProps>,\n): React.ComponentType<Props> {\n  const WithDOM = (props: Props) => {\n    const dom = useDOM();\n    return <Component {...props} {...dom} />;\n  };\n  return WithDOM;\n}\n\nexport function blurActiveElement(document: Document | undefined) {\n  if (document && document.activeElement) {\n    (document.activeElement as HTMLElement).blur();\n  }\n}\n"],"names":["React","canUseDOM","canUseEventListeners","onDOMLoaded","getDOM","window","undefined","document","DOMContext","createContext","useDOM","useContext","withDOM","Component","WithDOM","props","dom","blurActiveElement","activeElement","blur"],"mappings":";AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASA,SAAS,EAAEC,oBAAoB,EAAEC,WAAW,QAAQ,kBAAkB;AAe/E,wCAAwC,GACxC,OAAO,IAAMC,SAAS;WAAO;QAC3BC,QAAQJ,YAAYI,SAASC;QAC7BC,UAAUN,YAAYM,WAAWD;IACnC;EAAG;AACH,uCAAuC,GAEvC,OAAO,IAAME,2BAAaR,MAAMS,aAAa,CAAsBL,UAAU;AAE7E,OAAO,IAAMM,SAAS;IACpB,OAAOV,MAAMW,UAAU,CAACH;AAC1B,EAAE;AAEF,OAAO,SAASI,QACdC,SAAgD;IAEhD,IAAMC,UAAU,SAACC;QACf,IAAMC,MAAMN;QACZ,qBAAO,oBAACG,8BAAcE,OAAWC;IACnC;IACA,OAAOF;AACT;AAEA,OAAO,SAASG,kBAAkBV,SAA8B;IAC9D,IAAIA,aAAYA,UAASW,aAAa,EAAE;QACrCX,UAASW,aAAa,CAAiBC,IAAI;IAC9C;AACF"}