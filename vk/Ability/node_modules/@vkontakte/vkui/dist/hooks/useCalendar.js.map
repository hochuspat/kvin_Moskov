{"version":3,"sources":["../../src/hooks/useCalendar.ts"],"sourcesContent":["import * as React from 'react';\nimport { CalendarProps } from '../components/Calendar/Calendar';\nimport {\n  addMonths,\n  endOfDay,\n  isAfter,\n  isBefore,\n  isSameDay,\n  startOfDay,\n  subMonths,\n} from '../lib/date';\n\nexport interface UseCalendarDependencies\n  extends Pick<CalendarProps, 'onHeaderChange' | 'onNextMonth' | 'onPrevMonth'> {\n  value?: Array<Date | null> | Date;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  shouldDisableDate?(value: Date): boolean;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onHeaderChange,\n  onNextMonth,\n  onPrevMonth,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date(),\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(() => {\n    onPrevMonth?.();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  const setNextMonth = React.useCallback(() => {\n    onNextMonth?.();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n\n  const handleSetViewDate = React.useCallback(\n    (value: Date) => {\n      onHeaderChange?.(value);\n      setViewDate(value);\n    },\n    [onHeaderChange],\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay],\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date) => {\n      const now = new Date();\n      let disabled = false;\n      if (disablePast) {\n        disabled = isBefore(endOfDay(day), now);\n      }\n      if (disableFuture) {\n        disabled = isAfter(startOfDay(day), now);\n      }\n      if (shouldDisableDate) {\n        disabled = shouldDisableDate(day);\n      }\n\n      return disabled;\n    },\n    [disableFuture, disablePast, shouldDisableDate],\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"],"names":["React","addMonths","endOfDay","isAfter","isBefore","isSameDay","startOfDay","subMonths","useCalendar","value","disablePast","disableFuture","shouldDisableDate","onHeaderChange","onNextMonth","onPrevMonth","Array","useState","isArray","Date","viewDate","setViewDate","focusedDay","setFocusedDay","setPrevMonth","useCallback","setNextMonth","handleSetViewDate","isDayFocused","day","Boolean","isDayDisabled","now","disabled","resetSelectedDay","undefined"],"mappings":";AAAA,YAAYA,WAAW,QAAQ;AAE/B,SACEC,SAAS,EACTC,QAAQ,EACRC,OAAO,EACPC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,SAAS,QACJ,cAAc;AAUrB,OAAO,SAASC,YAAY,KAQF;QAPxBC,QAD0B,MAC1BA,OACAC,cAF0B,MAE1BA,aACAC,gBAH0B,MAG1BA,eACAC,oBAJ0B,MAI1BA,mBACAC,iBAL0B,MAK1BA,gBACAC,cAN0B,MAM1BA,aACAC,cAP0B,MAO1BA;QAGGC;IADH,IAAgChB,mCAAAA,MAAMiB,QAAQ,CAC5C,CAACD,OAAAA,MAAME,OAAO,CAACT,SAASA,KAAK,CAAC,EAAE,GAAGA,mBAAlCO,kBAAAA,OAA4C,IAAIG,aAD5CC,WAAyBpB,oBAAfqB,cAAerB;IAGhC,IAAoCA,oCAAAA,MAAMiB,QAAQ,QAA3CK,aAA6BtB,qBAAjBuB,gBAAiBvB;IAEpC,IAAMwB,eAAexB,MAAMyB,WAAW,CAAC;QACrCV,wBAAAA,kCAAAA;QACAM,YAAYd,UAAUa,UAAU;IAClC,GAAG;QAACA;QAAUL;KAAY;IAC1B,IAAMW,eAAe1B,MAAMyB,WAAW,CAAC;QACrCX,wBAAAA,kCAAAA;QACAO,YAAYpB,UAAUmB,UAAU;IAClC,GAAG;QAACA;QAAUN;KAAY;IAE1B,IAAMa,oBAAoB3B,MAAMyB,WAAW,CACzC,SAAChB;QACCI,2BAAAA,qCAAAA,eAAiBJ;QACjBY,YAAYZ;IACd,GACA;QAACI;KAAe;IAGlB,IAAMe,eAAe5B,MAAMyB,WAAW,CACpC,SAACI;eAAcC,QAAQR,cAAcjB,UAAUwB,KAAKP;OACpD;QAACA;KAAW;IAGd,IAAMS,gBAAgB/B,MAAMyB,WAAW,CACrC,SAACI;QACC,IAAMG,MAAM,IAAIb;QAChB,IAAIc,WAAW;QACf,IAAIvB,aAAa;YACfuB,WAAW7B,SAASF,SAAS2B,MAAMG;QACrC;QACA,IAAIrB,eAAe;YACjBsB,WAAW9B,QAAQG,WAAWuB,MAAMG;QACtC;QACA,IAAIpB,mBAAmB;YACrBqB,WAAWrB,kBAAkBiB;QAC/B;QAEA,OAAOI;IACT,GACA;QAACtB;QAAeD;QAAaE;KAAkB;IAGjD,IAAMsB,mBAAmBlC,MAAMyB,WAAW,CAAC;QACzCF,cAAcY;IAChB,GAAG;QAACZ;KAAc;IAElB,OAAO;QACLH,UAAAA;QACAC,aAAaM;QACbH,cAAAA;QACAE,cAAAA;QACAJ,YAAAA;QACAC,eAAAA;QACAK,cAAAA;QACAG,eAAAA;QACAG,kBAAAA;IACF;AACF"}