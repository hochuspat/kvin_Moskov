{"version":3,"sources":["../../../src/lib/dom.tsx"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM } from '@vkontakte/vkjs';\nexport { canUseDOM, canUseEventListeners, onDOMLoaded } from '@vkontakte/vkjs';\n\nexport interface DOMContextInterface {\n  /**\n   * @ignore\n   */\n  window?: Window;\n  /**\n   * @ignore\n   */\n  document?: Document;\n}\n\nexport type DOMProps = DOMContextInterface;\n\n/* eslint-disable no-restricted-globals */\nexport const getDOM = () => ({\n  window: canUseDOM ? window : undefined,\n  document: canUseDOM ? document : undefined,\n});\n/* eslint-enable no-restricted-globals */\n\nexport const DOMContext = React.createContext<DOMContextInterface>(getDOM());\n\nexport const useDOM = () => {\n  return React.useContext(DOMContext);\n};\n\nexport function withDOM<Props>(\n  Component: React.ComponentType<Props & DOMProps>,\n): React.ComponentType<Props> {\n  const WithDOM = (props: Props) => {\n    const dom = useDOM();\n    return <Component {...props} {...dom} />;\n  };\n  return WithDOM;\n}\n\nexport function blurActiveElement(document: Document | undefined) {\n  if (document && document.activeElement) {\n    (document.activeElement as HTMLElement).blur();\n  }\n}\n"],"names":["DOMContext","blurActiveElement","canUseDOM","canUseEventListeners","getDOM","onDOMLoaded","useDOM","withDOM","window","undefined","document","React","createContext","useContext","Component","WithDOM","props","dom","activeElement","blur"],"mappings":";;;;;;;;;;;IAwBaA,UAAU;eAAVA;;IAgBGC,iBAAiB;eAAjBA;;IAtCPC,SAAS;eAATA,eAAS;;IAAEC,oBAAoB;eAApBA,0BAAoB;;IAgB3BC,MAAM;eAANA;;IAhB6BC,WAAW;eAAXA,iBAAW;;IAwBxCC,MAAM;eAANA;;IAIGC,OAAO;eAAPA;;;;;+DA9BO;oBACG;AAiBnB,IAAMH,SAAS;WAAO;QAC3BI,QAAQN,eAAS,GAAGM,SAASC;QAC7BC,UAAUR,eAAS,GAAGQ,WAAWD;IACnC;;AAGO,IAAMT,2BAAaW,OAAMC,aAAa,CAAsBR;AAE5D,IAAME,SAAS;IACpB,OAAOK,OAAME,UAAU,CAACb;AAC1B;AAEO,SAASO,QACdO,SAAgD;IAEhD,IAAMC,UAAU,SAACC;QACf,IAAMC,MAAMX;QACZ,qBAAO,qBAACQ,gCAAcE,OAAWC;IACnC;IACA,OAAOF;AACT;AAEO,SAASd,kBAAkBS,SAA8B;IAC9D,IAAIA,aAAYA,UAASQ,aAAa,EAAE;QACrCR,UAASQ,aAAa,CAAiBC,IAAI;IAC9C;AACF"}