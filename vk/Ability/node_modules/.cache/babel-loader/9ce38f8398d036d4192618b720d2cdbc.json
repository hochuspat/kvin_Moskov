{"ast":null,"code":"import * as React from \"react\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useDOM } from \"../../lib/dom\";\nexport function useAutoPlay(timeout, slideIndex, callbackFn) {\n  var _useTimeout = useTimeout(callbackFn, timeout),\n      clearAutoPlay = _useTimeout.clear,\n      setAutoPlay = _useTimeout.set;\n\n  var document = useDOM().document;\n  React.useEffect(function () {\n    return timeout ? setAutoPlay() : clearAutoPlay();\n  }, [timeout, slideIndex, clearAutoPlay, setAutoPlay]); // Отключаем прокрутку слайдов при неактивной вкладке\n\n  React.useEffect(function preventSlideChange() {\n    if (!document || !timeout) {\n      return;\n    }\n\n    var changeAutoPlay = function () {\n      if (document.visibilityState === \"visible\") {\n        clearAutoPlay();\n        setAutoPlay();\n      }\n\n      if (document.visibilityState === \"hidden\") {\n        clearAutoPlay();\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", changeAutoPlay);\n    return function () {\n      document.removeEventListener(\"visibilitychange\", changeAutoPlay);\n    };\n  }, [document, timeout, clearAutoPlay, setAutoPlay]);\n}","map":{"version":3,"mappings":"AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA2B,wBAA3B;AACA,SAASC,MAAT,QAAuB,eAAvB;AAEA,OAAO,SAASC,WAAT,CAAqBC,OAArB,EAAsCC,UAAtC,EAA0DC,UAA1D,EAAkF;EACvF,IAAmDL,yBAAWK,UAAXL,EAAuBG,OAAvBH,CAAnD;EAAA,IAAQM,aAAOC,GAAoCP,YAA3CM,KAAR;EAAA,IAA8BE,WAAKC,GAAgBT,YAArBQ,GAA9B;;EACA,IAAME,QAAEA,GAAaT,SAAbS,QAAR;EAEAX,MAAMY,SAANZ,CACE;WAAOI,UAAUM,aAAVN,GAA0BI;GADnCR,EAEE,CAACI,OAAD,EAAUC,UAAV,EAAsBG,aAAtB,EAAqCE,WAArC,CAFFV,EAJuF,CASvF;;EACAA,MAAMY,SAANZ,CACE,SAASa,kBAAT,GAASA;IACP,IAAI,CAACF,QAAD,IAAa,CAACP,OAAlB,EAA2B;MACzB;IACF;;IAEA,IAAMU,iBAAiB;MACrB,IAAIH,SAASI,eAATJ,KAA6B,SAAjC,EAA4C;QAC1CH;QACAE;MACF;;MACA,IAAIC,SAASI,eAATJ,KAA6B,QAAjC,EAA2C;QACzCH;MACF;IACF,CARA;;IAUAG,SAASK,gBAATL,CAA0B,kBAA1BA,EAA8CG,cAA9CH;IAEA,OAAO;MACLA,SAASM,mBAATN,CAA6B,kBAA7BA,EAAiDG,cAAjDH;IACF,CAFA;EAGF,CArBFX,EAsBE,CAACW,QAAD,EAAWP,OAAX,EAAoBI,aAApB,EAAmCE,WAAnC,CAtBFV;AAwBF","names":["React","useTimeout","useDOM","useAutoPlay","timeout","slideIndex","callbackFn","clear","clearAutoPlay","set","setAutoPlay","document","useEffect","preventSlideChange","changeAutoPlay","visibilityState","addEventListener","removeEventListener"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\Gallery\\hooks.ts"],"sourcesContent":["import * as React from 'react';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useDOM } from '../../lib/dom';\n\nexport function useAutoPlay(timeout: number, slideIndex: number, callbackFn: VoidFunction) {\n  const { clear: clearAutoPlay, set: setAutoPlay } = useTimeout(callbackFn, timeout);\n  const { document } = useDOM();\n\n  React.useEffect(\n    () => (timeout ? setAutoPlay() : clearAutoPlay()),\n    [timeout, slideIndex, clearAutoPlay, setAutoPlay],\n  );\n\n  // Отключаем прокрутку слайдов при неактивной вкладке\n  React.useEffect(\n    function preventSlideChange() {\n      if (!document || !timeout) {\n        return;\n      }\n\n      const changeAutoPlay = () => {\n        if (document.visibilityState === 'visible') {\n          clearAutoPlay();\n          setAutoPlay();\n        }\n        if (document.visibilityState === 'hidden') {\n          clearAutoPlay();\n        }\n      };\n\n      document.addEventListener('visibilitychange', changeAutoPlay);\n\n      return () => {\n        document.removeEventListener('visibilitychange', changeAutoPlay);\n      };\n    },\n    [document, timeout, clearAutoPlay, setAutoPlay],\n  );\n}\n"]},"metadata":{},"sourceType":"module"}