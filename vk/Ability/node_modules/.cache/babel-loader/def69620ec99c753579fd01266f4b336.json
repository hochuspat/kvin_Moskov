{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { SplitColContext } from \"../SplitCol/SplitColContext\";\nimport { TooltipContainer } from \"../Tooltip/TooltipContainer\";\nvar stylesVertical = {\n  top: \"vkuiFixedLayout--vertical-top\",\n  bottom: classNames(\"vkuiFixedLayout--vertical-bottom\", \"vkuiInternalFixedLayout--vertical-bottom\")\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/FixedLayout\n */\n\nexport var FixedLayout = function (_param) {\n  var children = _param.children,\n      style = _param.style,\n      vertical = _param.vertical,\n      getRootRef = _param.getRootRef,\n      getRef = _param.getRef,\n      filled = _param.filled,\n      className = _param.className,\n      useParentWidth = _param.useParentWidth,\n      restProps = _object_without_properties(_param, [\"children\", \"style\", \"vertical\", \"getRootRef\", \"getRef\", \"filled\", \"className\", \"useParentWidth\"]);\n\n  var platform = usePlatform();\n  var ref = useExternRef(getRootRef, getRef); // TODO [>=6]: удалить getRef\n\n  var _React_useState = _sliced_to_array(React.useState(undefined), 2),\n      width = _React_useState[0],\n      setWidth = _React_useState[1];\n\n  var window = useDOM().window;\n  var colRef = React.useContext(SplitColContext).colRef;\n\n  var doResize = function () {\n    if (useParentWidth && ref.current) {\n      var _ref_current_parentElement;\n\n      var parentWidth = (_ref_current_parentElement = ref.current.parentElement) === null || _ref_current_parentElement === void 0 ? void 0 : _ref_current_parentElement.getBoundingClientRect().width;\n      setWidth(parentWidth ? \"\".concat(parentWidth, \"px\") : undefined);\n    } else if (colRef === null || colRef === void 0 ? void 0 : colRef.current) {\n      var computedStyle = getComputedStyle(colRef.current);\n      setWidth(\"\".concat(colRef.current.clientWidth - parseFloat(computedStyle.paddingLeft) - parseFloat(computedStyle.paddingRight), \"px\"));\n    } else {\n      setWidth(undefined);\n    }\n  };\n\n  React.useEffect(doResize, [colRef, platform, ref, useParentWidth]);\n  useGlobalEventListener(window, \"resize\", doResize);\n  return /*#__PURE__*/React.createElement(TooltipContainer, _object_spread_props(_object_spread({}, restProps), {\n    fixed: true,\n    ref: ref,\n    className: classNames(\"vkuiFixedLayout\", platform === Platform.IOS && \"vkuiInternalFixedLayout--ios\", filled && \"vkuiFixedLayout--filled\", vertical && stylesVertical[vertical], className),\n    style: _object_spread_props(_object_spread({}, style), {\n      width: width\n    })\n  }), children);\n};","map":{"version":3,"mappings":";;;;AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,YAAT,QAA6B,0BAA7B;AACA,SAASC,sBAAT,QAAuC,oCAAvC;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,SAASC,eAAT,QAAgC,6BAAhC;AACA,SAASC,gBAAT,QAAiC,6BAAjC;AAGA,IAAMC,iBAAiB;EACrBC,GAAG,iCADkB;EAErBC,QAAQV,+CAEN,0CAFMA;AAFa,CAAvB;AA+BA;;;;AAGA,OAAO,IAAMW,cAAc;MACzBC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACGC,gDARHR,UAQGQ,EAPHP,OAOGO,EANHN,UAMGM,EALHL,YAKGK,EAJHJ,QAIGI,EAHHH,QAGGG,EAFHF,WAEGE,EADHD,gBACGC;;EAEH,IAAMC,WAAWlB,aAAjB;EACA,IAAMmB,MAAMrB,aAAac,UAAbd,EAAyBe,MAAzBf,CAAZ,CAZyB,CAYqB;;EAC9C,IAA0BF,yCAAMwB,QAANxB,CAAmCyB,SAAnCzB,GAAmCyB,CAAnCzB,CAA1B;EAAA,IAAO0B,QAAmB1B,kBAA1B;EAAA,IAAc2B,WAAY3B,kBAA1B;;EACA,IAAM4B,MAAEA,GAAWvB,SAAXuB,MAAR;EACA,IAAMC,MAAEA,GAAW7B,MAAM8B,UAAN9B,CAAiBO,eAAjBP,EAAX6B,MAAR;;EAEA,IAAME,WAAW;IACf,IAAIX,kBAAkBG,IAAIS,OAA1B,EAAmC;UACbT;;MAApB,IAAMU,eAAcV,iCAAIS,OAAJT,CAAYW,aAA1BD,MAAuC,IAAvCA,IAAcV,qCAAdU,GAAcV,MAAdU,GAAcV,2BAA2BY,qBAA3BZ,GAAmDG,KAAvE;MACAC,SAASM,cAAc,GAAeG,MAAf,CAAGH,WAAH,EAAe,IAAf,CAAdA,GAAmCR,SAA5CE;IACF,CAHA,MAGO,IAAIE,uDAAQG,OAAZ,EAAqB;MAC1B,IAAMK,gBAAgBC,iBAAiBT,OAAOG,OAAxBM,CAAtB;MAEAX,SACE,GAICS,MAJD,CACEP,OAAOG,OAAPH,CAAeU,WAAfV,GACAW,WAAWH,cAAcI,WAAzBD,CADAX,GAEAW,WAAWH,cAAcK,YAAzBF,CAHF,EAIC,IAJD,CADFb;IAOF,CAVO,MAUA;MACLA,SAASF,SAATE;IACF;EACF,CAjBA;;EAkBA3B,MAAM2C,SAAN3C,CAAgB+B,QAAhB/B,EAA0B,CAAC6B,MAAD,EAASP,QAAT,EAAmBC,GAAnB,EAAwBH,cAAxB,CAA1BpB;EACAG,uBAAuByB,MAAvBzB,EAA+B,QAA/BA,EAAyC4B,QAAzC5B;EAEA,oBACEH,oBAACQ,gBAAD,EAACA,wCACKa,SADLb,GACKa;IACJuB,WADIvB;IAEJE,KAAKA,GAFDF;IAGJF,WAAWlB,8BAETqB,aAAahB,SAASuC,GAAtBvB,IAA6B,8BAFpBrB,EAGTiB,mCAHSjB,EAITc,YAAYN,cAAc,CAACM,QAAD,CAJjBd,EAKTkB,SALSlB,CAHPoB;IAUJP,OAAOgC,wCAAKhC,KAAL,GAAKA;MAAOY;IAAPZ,CAAL;EAVHO,CADLb,CAAD,EAaGK,QAbH,CADF;AAiBF,CAvDO","names":["React","classNames","useExternRef","useGlobalEventListener","usePlatform","useDOM","Platform","SplitColContext","TooltipContainer","stylesVertical","top","bottom","FixedLayout","children","style","vertical","getRootRef","getRef","filled","className","useParentWidth","restProps","platform","ref","useState","undefined","width","setWidth","window","colRef","useContext","doResize","current","parentWidth","parentElement","getBoundingClientRect","concat","computedStyle","getComputedStyle","clientWidth","parseFloat","paddingLeft","paddingRight","useEffect","fixed","IOS","_object_spread_props"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\FixedLayout\\FixedLayout.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { HasRef, HTMLAttributesWithRootRef } from '../../types';\nimport { SplitColContext } from '../SplitCol/SplitColContext';\nimport { TooltipContainer } from '../Tooltip/TooltipContainer';\nimport styles from './FixedLayout.module.css';\n\nconst stylesVertical = {\n  top: styles['FixedLayout--vertical-top'],\n  bottom: classNames(\n    styles['FixedLayout--vertical-bottom'],\n    'vkuiInternalFixedLayout--vertical-bottom',\n  ),\n};\n\nexport interface FixedLayoutProps\n  extends HTMLAttributesWithRootRef<HTMLDivElement>,\n    HasRef<HTMLDivElement> {\n  vertical?: 'top' | 'bottom';\n  /**\n   * Это свойство определяет, будет ли фон компонента окрашен в цвет фона контента.\n   * Это часто необходимо для фиксированных кнопок в нижней части экрана.\n   */\n  filled?: boolean;\n  /**\n   * Всегда соответствовать ширине родителя.\n   * Ширина пересчитывается по событию `window` `resize`.\n   */\n  useParentWidth?: boolean;\n}\n\nexport interface FixedLayoutState {\n  position: 'absolute' | null;\n  top: number;\n  bottom: number;\n  width: string;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/FixedLayout\n */\nexport const FixedLayout = ({\n  children,\n  style,\n  vertical,\n  getRootRef,\n  getRef,\n  filled,\n  className,\n  useParentWidth,\n  ...restProps\n}: FixedLayoutProps) => {\n  const platform = usePlatform();\n  const ref = useExternRef(getRootRef, getRef); // TODO [>=6]: удалить getRef\n  const [width, setWidth] = React.useState<string | undefined>(undefined);\n  const { window } = useDOM();\n  const { colRef } = React.useContext(SplitColContext);\n\n  const doResize = () => {\n    if (useParentWidth && ref.current) {\n      const parentWidth = ref.current.parentElement?.getBoundingClientRect().width;\n      setWidth(parentWidth ? `${parentWidth}px` : undefined);\n    } else if (colRef?.current) {\n      const computedStyle = getComputedStyle(colRef.current);\n\n      setWidth(\n        `${\n          colRef.current.clientWidth -\n          parseFloat(computedStyle.paddingLeft) -\n          parseFloat(computedStyle.paddingRight)\n        }px`,\n      );\n    } else {\n      setWidth(undefined);\n    }\n  };\n  React.useEffect(doResize, [colRef, platform, ref, useParentWidth]);\n  useGlobalEventListener(window, 'resize', doResize);\n\n  return (\n    <TooltipContainer\n      {...restProps}\n      fixed\n      ref={ref}\n      className={classNames(\n        styles['FixedLayout'],\n        platform === Platform.IOS && 'vkuiInternalFixedLayout--ios',\n        filled && styles['FixedLayout--filled'],\n        vertical && stylesVertical[vertical],\n        className,\n      )}\n      style={{ ...style, width }}\n    >\n      {children}\n    </TooltipContainer>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}