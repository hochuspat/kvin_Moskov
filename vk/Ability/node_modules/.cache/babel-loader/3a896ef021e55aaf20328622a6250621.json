{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { pressedKey } from \"../../lib/accessibility\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nexport var TabsModeContext = /*#__PURE__*/React.createContext({\n  mode: \"default\",\n  withGaps: false\n});\n/**\n * @see https://vkcom.github.io/VKUI/#/Tabs\n */\n\nexport var Tabs = function (_param) {\n  var children = _param.children,\n      _param_mode = _param.mode,\n      mode = _param_mode === void 0 ? \"default\" : _param_mode,\n      _param_role = _param.role,\n      role = _param_role === void 0 ? \"tablist\" : _param_role,\n      restProps = _object_without_properties(_param, [\"children\", \"mode\", \"role\"]);\n\n  var platform = usePlatform();\n  var document = useDOM().document;\n  var isTabFlow = role === \"tablist\";\n  var tabsRef = React.useRef(null);\n  var withGaps = mode === \"accent\" || mode === \"secondary\";\n\n  var getTabEls = function () {\n    if (!tabsRef.current) {\n      return [];\n    }\n\n    return Array.from( // eslint-disable-next-line no-restricted-properties\n    tabsRef.current.querySelectorAll(\"[role=tab]:not([disabled])\"));\n  };\n\n  var handleDocumentKeydown = function (event) {\n    if (!document || !tabsRef.current || !isTabFlow) {\n      return;\n    }\n\n    var key = pressedKey(event);\n\n    switch (key) {\n      case \"ArrowLeft\":\n      case \"ArrowRight\":\n      case \"End\":\n      case \"Home\":\n        {\n          var tabEls = getTabEls();\n          var currentFocusedElIndex = tabEls.findIndex(function (el) {\n            return document.activeElement === el;\n          });\n\n          if (currentFocusedElIndex === -1) {\n            return;\n          }\n\n          var nextIndex = 0;\n\n          if (key === \"Home\") {\n            nextIndex = 0;\n          } else if (key === \"End\") {\n            nextIndex = tabEls.length - 1;\n          } else {\n            var offset = key === \"ArrowRight\" ? 1 : -1;\n            nextIndex = currentFocusedElIndex + offset;\n          }\n\n          var nextTabEl = tabEls[nextIndex];\n\n          if (nextTabEl) {\n            event.preventDefault();\n            nextTabEl.focus();\n          }\n\n          break;\n        }\n\n      /*\n      В JAWS и NVDA стрелка вниз активирует контент.\n      Это не прописано в стандартах, но по ссылке ниже это рекомендуется делать.\n      https://inclusive-components.design/tabbed-interfaces/\n      */\n\n      case \"ArrowDown\":\n        {\n          var tabEls1 = getTabEls();\n          var currentFocusedEl = tabEls1.find(function (el) {\n            return document.activeElement === el;\n          });\n\n          if (!currentFocusedEl || currentFocusedEl.getAttribute(\"aria-selected\") !== \"true\") {\n            return;\n          }\n\n          var relatedContentElId = currentFocusedEl.getAttribute(\"aria-controls\");\n\n          if (!relatedContentElId) {\n            return;\n          } // eslint-disable-next-line no-restricted-properties\n\n\n          var relatedContentEl = document.getElementById(relatedContentElId);\n\n          if (!relatedContentEl) {\n            return;\n          }\n\n          event.preventDefault();\n          relatedContentEl.focus();\n          break;\n        }\n\n      case \"Space\":\n      case \"Enter\":\n        {\n          var tabEls2 = getTabEls();\n          var currentFocusedEl1 = tabEls2.find(function (el) {\n            return document.activeElement === el;\n          });\n\n          if (currentFocusedEl1) {\n            currentFocusedEl1.click();\n          }\n        }\n    }\n  };\n\n  useGlobalEventListener(document, \"keydown\", handleDocumentKeydown, {\n    capture: true\n  });\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    baseClassName: classNames(\"vkuiTabs\", \"vkuiInternalTabs\", platform === Platform.VKCOM && \"vkuiInternalTabs--vkcom\", withGaps && classNames(\"vkuiTabs--withGaps\", \"vkuiInternalTabs--withGaps\"), mode === \"default\" && \"vkuiTabs--mode-default\"),\n    role: role\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiTabs__in\",\n    ref: tabsRef\n  }, /*#__PURE__*/React.createElement(TabsModeContext.Provider, {\n    value: {\n      mode: mode,\n      withGaps: withGaps\n    }\n  }, children)));\n};","map":{"version":3,"mappings":";;;AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,sBAAT,QAAuC,oCAAvC;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,SAASC,aAAT,QAA8B,gCAA9B;AAYA,OAAO,IAAMC,+BAAkBR,MAAMS,aAANT,CAAsC;EACnEU,MAAM,SAD6D;EAEnEC,UAAU;AAFyD,CAAtCX,CAAxB;AAKP;;;;AAGA,OAAO,IAAMY,OAAO;MAAGC;MAAAA,qBAAUH;MAAAA,gCAAO,SAAPA,GAAOI;MAAAC,qBAAWC;MAAAA,gCAAO,SAAPA,GAAOD;MAAcE,gDAAjDJ,UAAiDI,EAAvCP,MAAuCO,EAArBD,MAAqBC;;EACtE,IAAMC,WAAWf,aAAjB;EACA,IAAMgB,QAAEA,GAAad,SAAbc,QAAR;EAEA,IAAMC,YAAYJ,SAAS,SAA3B;EAEA,IAAMK,UAAUrB,MAAMsB,MAANtB,CAA6B,IAA7BA,CAAhB;EAEA,IAAMW,WAAWD,SAAS,QAATA,IAAqBA,SAAS,WAA/C;;EAEA,IAAMa,YAAY;IAChB,IAAI,CAACF,QAAQG,OAAb,EAAsB;MACpB,OAAO,EAAP;IACF;;IAEA,OAAOC,MAAMC,IAAND,EACL;IACAJ,QAAQG,OAARH,CAAgBM,gBAAhBN,CAAiD,4BAAjDA,CAFKI,CAAP;EAIF,CATA;;EAWA,IAAMG,wBAAwB,UAACC,KAAD,EAACA;IAC7B,IAAI,CAACV,QAAD,IAAa,CAACE,QAAQG,OAAtB,IAAiC,CAACJ,SAAtC,EAAiD;MAC/C;IACF;;IAEA,IAAMU,MAAM1B,WAAWyB,KAAXzB,CAAZ;;IAEA,QAAQ0B,GAAR;MACE,KAAK,WAAL;MACA,KAAK,YAAL;MACA,KAAK,KAAL;MACA,KAAK,MAAL;QAAa;UACX,IAAMC,SAASR,WAAf;UACA,IAAMS,wBAAwBD,OAAOE,SAAPF,CAAiB,UAACG,EAAD,EAACA;mBAAOf,SAASgB,aAAThB,KAA2Be;WAApDH,CAA9B;;UACA,IAAIC,0BAA0B,CAAC,CAA/B,EAAkC;YAChC;UACF;;UAEA,IAAII,YAAY,CAAhB;;UACA,IAAIN,QAAQ,MAAZ,EAAoB;YAClBM,YAAY,CAAZA;UACF,CAFA,MAEO,IAAIN,QAAQ,KAAZ,EAAmB;YACxBM,YAAYL,OAAOM,MAAPN,GAAgB,CAA5BK;UACF,CAFO,MAEA;YACL,IAAME,SAASR,QAAQ,YAARA,GAAuB,CAAvBA,GAA2B,CAAC,CAA3C;YACAM,YAAYJ,wBAAwBM,MAApCF;UACF;;UAEA,IAAMG,YAAYR,MAAM,CAACK,SAAD,CAAxB;;UAEA,IAAIG,SAAJ,EAAe;YACbV,MAAMW,cAANX;YACAU,UAAUE,KAAVF;UACF;;UAEA;QACF;;MACA;;;;;;MAKA,KAAK,WAAL;QAAkB;UAChB,IAAMR,UAASR,WAAf;UACA,IAAMmB,mBAAmBX,QAAOY,IAAPZ,CAAY,UAACG,EAAD,EAACA;mBAAOf,SAASgB,aAAThB,KAA2Be;WAA/CH,CAAzB;;UAEA,IAAI,CAACW,gBAAD,IAAqBA,iBAAiBE,YAAjBF,CAA8B,eAA9BA,MAAmD,MAA5E,EAAoF;YAClF;UACF;;UAEA,IAAMG,qBAAqBH,iBAAiBE,YAAjBF,CAA8B,eAA9BA,CAA3B;;UACA,IAAI,CAACG,kBAAL,EAAyB;YACvB;UACF,CAXgB,CAahB;;;UACA,IAAMC,mBAAmB3B,SAAS4B,cAAT5B,CAAwB0B,kBAAxB1B,CAAzB;;UACA,IAAI,CAAC2B,gBAAL,EAAuB;YACrB;UACF;;UAEAjB,MAAMW,cAANX;UACAiB,iBAAiBL,KAAjBK;UAEA;QACF;;MACA,KAAK,OAAL;MACA,KAAK,OAAL;QAAc;UACZ,IAAMf,UAASR,WAAf;UACA,IAAMmB,oBAAmBX,QAAOY,IAAPZ,CAAY,UAACG,EAAD,EAACA;mBAAOf,SAASgB,aAAThB,KAA2Be;WAA/CH,CAAzB;;UACA,IAAIW,iBAAJ,EAAsB;YACpBA,kBAAiBM,KAAjBN;UACF;QACF;IAlEF;EAoEF,CA3EA;;EA6EAxC,uBAAuBiB,QAAvBjB,EAAiC,SAAjCA,EAA4C0B,qBAA5C1B,EAAmE;IACjE+C,SAAS;EADwD,CAAnE/C;EAIA,oBACEF,oBAACO,aAAD,EAACA,wCACKU,SADLV,GACKU;IACJiC,eAAejD,uBAEb,kBAFaA,EAGbiB,aAAaZ,SAAS6C,KAAtBjC,IAA+B,yBAHlBjB,EAIbU,YAAYV,iCAAqC,4BAArCA,CAJCA,EAKbS,SAAS,SAATA,IAAS,wBALIT,CADXgB;IAQJD,MAAMA;EARFC,CADLV,CAAD,eAWEP,oBAACoD,KAAD,EAACA;IAAIC,SAAS,gBAAbD;IAAmCE,KAAKjC;EAAxC+B,CAAD,eACEpD,oBAACQ,gBAAgB+C,QAAjB,EAAyB;IAACC,OAAO;MAAE9C,UAAF;MAAQC;IAAR;EAAR,CAAzB,EAAsDE,QAAtD,CADF,CAXF,CADF;AAiBF,CAvHO","names":["React","classNames","useGlobalEventListener","usePlatform","pressedKey","useDOM","Platform","RootComponent","TabsModeContext","createContext","mode","withGaps","Tabs","children","_param_mode","_param_role","role","restProps","platform","document","isTabFlow","tabsRef","useRef","getTabEls","current","Array","from","querySelectorAll","handleDocumentKeydown","event","key","tabEls","currentFocusedElIndex","findIndex","el","activeElement","nextIndex","length","offset","nextTabEl","preventDefault","focus","currentFocusedEl","find","getAttribute","relatedContentElId","relatedContentEl","getElementById","click","capture","baseClassName","VKCOM","div","className","ref","Provider","value"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\Tabs\\Tabs.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { pressedKey } from '../../lib/accessibility';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './Tabs.module.css';\n\nexport interface TabsProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  mode?: 'default' | 'accent' | 'secondary';\n}\n\nexport interface TabsContextProps {\n  mode: TabsProps['mode'];\n  withGaps: boolean;\n}\n\nexport const TabsModeContext = React.createContext<TabsContextProps>({\n  mode: 'default',\n  withGaps: false,\n});\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Tabs\n */\nexport const Tabs = ({ children, mode = 'default', role = 'tablist', ...restProps }: TabsProps) => {\n  const platform = usePlatform();\n  const { document } = useDOM();\n\n  const isTabFlow = role === 'tablist';\n\n  const tabsRef = React.useRef<HTMLDivElement>(null);\n\n  const withGaps = mode === 'accent' || mode === 'secondary';\n\n  const getTabEls = () => {\n    if (!tabsRef.current) {\n      return [];\n    }\n\n    return Array.from(\n      // eslint-disable-next-line no-restricted-properties\n      tabsRef.current.querySelectorAll<HTMLDivElement>('[role=tab]:not([disabled])'),\n    );\n  };\n\n  const handleDocumentKeydown = (event: KeyboardEvent) => {\n    if (!document || !tabsRef.current || !isTabFlow) {\n      return;\n    }\n\n    const key = pressedKey(event);\n\n    switch (key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'End':\n      case 'Home': {\n        const tabEls = getTabEls();\n        const currentFocusedElIndex = tabEls.findIndex((el) => document.activeElement === el);\n        if (currentFocusedElIndex === -1) {\n          return;\n        }\n\n        let nextIndex = 0;\n        if (key === 'Home') {\n          nextIndex = 0;\n        } else if (key === 'End') {\n          nextIndex = tabEls.length - 1;\n        } else {\n          const offset = key === 'ArrowRight' ? 1 : -1;\n          nextIndex = currentFocusedElIndex + offset;\n        }\n\n        const nextTabEl = tabEls[nextIndex];\n\n        if (nextTabEl) {\n          event.preventDefault();\n          nextTabEl.focus();\n        }\n\n        break;\n      }\n      /*\n       В JAWS и NVDA стрелка вниз активирует контент.\n       Это не прописано в стандартах, но по ссылке ниже это рекомендуется делать.\n       https://inclusive-components.design/tabbed-interfaces/\n      */\n      case 'ArrowDown': {\n        const tabEls = getTabEls();\n        const currentFocusedEl = tabEls.find((el) => document.activeElement === el);\n\n        if (!currentFocusedEl || currentFocusedEl.getAttribute('aria-selected') !== 'true') {\n          return;\n        }\n\n        const relatedContentElId = currentFocusedEl.getAttribute('aria-controls');\n        if (!relatedContentElId) {\n          return;\n        }\n\n        // eslint-disable-next-line no-restricted-properties\n        const relatedContentEl = document.getElementById(relatedContentElId);\n        if (!relatedContentEl) {\n          return;\n        }\n\n        event.preventDefault();\n        relatedContentEl.focus();\n\n        break;\n      }\n      case 'Space':\n      case 'Enter': {\n        const tabEls = getTabEls();\n        const currentFocusedEl = tabEls.find((el) => document.activeElement === el);\n        if (currentFocusedEl) {\n          currentFocusedEl.click();\n        }\n      }\n    }\n  };\n\n  useGlobalEventListener(document, 'keydown', handleDocumentKeydown, {\n    capture: true,\n  });\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['Tabs'],\n        'vkuiInternalTabs',\n        platform === Platform.VKCOM && 'vkuiInternalTabs--vkcom',\n        withGaps && classNames(styles['Tabs--withGaps'], 'vkuiInternalTabs--withGaps'),\n        mode === 'default' && styles['Tabs--mode-default'],\n      )}\n      role={role}\n    >\n      <div className={styles['Tabs__in']} ref={tabsRef}>\n        <TabsModeContext.Provider value={{ mode, withGaps }}>{children}</TabsModeContext.Provider>\n      </div>\n    </RootComponent>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}