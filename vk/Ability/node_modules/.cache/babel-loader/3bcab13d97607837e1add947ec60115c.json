{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nvar stylesAlignX = {\n  center: \"vkuiPopoutWrapper--alignX-center\",\n  left: \"vkuiPopoutWrapper--alignX-left\",\n  right: \"vkuiPopoutWrapper--alignX-right\"\n};\nvar stylesAlignY = {\n  center: \"vkuiPopoutWrapper--alignY-center\",\n  top: \"vkuiPopoutWrapper--alignY-top\",\n  bottom: \"vkuiPopoutWrapper--alignY-bottom\"\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\n\nexport var PopoutWrapper = function (_param) {\n  var _param_alignY = _param.alignY,\n      alignY = _param_alignY === void 0 ? \"center\" : _param_alignY,\n      _param_alignX = _param.alignX,\n      alignX = _param_alignX === void 0 ? \"center\" : _param_alignX,\n      _param_closing = _param.closing,\n      closing = _param_closing === void 0 ? false : _param_closing,\n      _param_hasMask = _param.hasMask,\n      hasMask = _param_hasMask === void 0 ? true : _param_hasMask,\n      _param_fixed = _param.fixed,\n      fixed = _param_fixed === void 0 ? true : _param_fixed,\n      children = _param.children,\n      onClick = _param.onClick,\n      restProps = _object_without_properties(_param, [\"alignY\", \"alignX\", \"closing\", \"hasMask\", \"fixed\", \"children\", \"onClick\"]);\n\n  var platform = usePlatform();\n\n  var _React_useState = _sliced_to_array(React.useState(!hasMask), 2),\n      opened = _React_useState[0],\n      setOpened = _React_useState[1];\n\n  var onFadeInEnd = function (e) {\n    if (!e || e.animationName === \"vkuianimation-full-fade-in\") {\n      setOpened(true);\n    }\n  };\n\n  var animationFinishFallback = useTimeout(onFadeInEnd, platform === Platform.IOS ? 300 : 200);\n  React.useEffect(function () {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n  var window = useDOM().window;\n  useGlobalEventListener(window, \"touchmove\", function (e) {\n    return e.preventDefault();\n  }, {\n    passive: false\n  });\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    baseClassName: classNames(\"vkuiPopoutWrapper\", stylesAlignY[alignY], stylesAlignX[alignX], closing && \"vkuiPopoutWrapper--closing\", opened && \"vkuiPopoutWrapper--opened\", fixed && \"vkuiPopoutWrapper--fixed\", hasMask && \"vkuiPopoutWrapper--masked\"),\n    onAnimationEnd: opened ? undefined : onFadeInEnd\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__overlay\",\n    onClick: onClick\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__content\"\n  }, children)));\n};","map":{"version":3,"mappings":";;;;AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,sBAAT,QAAuC,oCAAvC;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,UAAT,QAA2B,wBAA3B;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,SAASC,aAAT,QAA8B,gCAA9B;AAGA,IAAMC,eAAe;EACnBC,MAAM,oCADa;EAEnBC,IAAI,kCAFe;EAGnBC,KAAK;AAHc,CAArB;AAMA,IAAMC,eAAe;EACnBH,MAAM,oCADa;EAEnBI,GAAG,iCAFgB;EAGnBC,MAAM;AAHa,CAArB;AAcA;;;;AAGA,OAAO,IAAMC,gBAAgB;6BAC3BC;MAAAA,oCAAS,QAATA,GAASC;MAAAC,uBACTC;MAAAA,oCAAS,QAATA,GAASD;MAAAE,wBACTC;MAAAA,sCAAU,KAAVA,GAAUD;MAAAE,wBACVC;MAAAA,sCAAU,IAAVA,GAAUD;MAAAE,sBACVC;MAAAA,kCAAQ,IAARA,GAAQD;MACRE;MACAC;MACGC,gDAPHZ,QAOGY,EANHT,QAMGS,EALHP,SAKGO,EAJHL,SAIGK,EAHHH,OAGGG,EAFHF,UAEGE,EADHD,SACGC;;EAEH,IAAMC,WAAW1B,aAAjB;;EACA,IAA4BH,yCAAM8B,QAAN9B,CAAe,CAACuB,OAAhBvB,GAAgBuB,CAAhBvB,CAA5B;EAAA,IAAO+B,SAAqB/B,kBAA5B;EAAA,IAAegC,YAAahC,kBAA5B;;EAEA,IAAMiC,cAAc,UAACC,CAAD,EAACA;IACnB,IAAI,CAACA,CAAD,IAAMA,EAAEC,aAAFD,KAAe,4BAAzB,EAAgE;MAC9DF,UAAU,IAAVA;IACF;EACF,CAJA;;EAKA,IAAMI,0BAA0BhC,WAAW6B,WAAX7B,EAAwByB,aAAavB,SAAS+B,GAAtBR,GAA4B,GAA5BA,GAAkC,GAA1DzB,CAAhC;EACAJ,MAAMsC,SAANtC,CAAgB;IACd,CAAC+B,MAAD,IAAWK,wBAAwBG,GAAxBH,EAAX;EACF,CAFApC,EAEG,CAACoC,uBAAD,EAA0BL,MAA1B,CAFH/B;EAIA,IAAMwC,MAAEA,GAAWnC,SAAXmC,MAAR;EACAtC,uBAAuBsC,MAAvBtC,EAA+B,WAA/BA,EAA4C,UAACgC,CAAD,EAACA;WAAMA,EAAEO,cAAFP;GAAnDhC,EAAuE;IACrEwC,SAAS;EAD4D,CAAvExC;EAIA,oBACEF,oBAACO,aAAD,EAACA,wCACKqB,SADLrB,GACKqB;IACJe,eAAe1C,gCAEbW,YAAY,CAACI,MAAD,CAFCf,EAGbO,YAAY,CAACW,MAAD,CAHClB,EAIboB,uCAJapB,EAKb8B,qCALa9B,EAMbwB,mCANaxB,EAObsB,sCAPatB,CADX2B;IAUJgB,gBAAgBb,SAASc,SAATd,GAAqBE;EAVjCL,CADLrB,CAAD,eAaEP,oBAAC8C,KAAD,EAACA;IAAIC,SAAS;EAAbD,CAAD,eACE9C,oBAAC8C,KAAD,EAACA;IAAIC,SAAS,8BAAbD;IAAiDnB,SAASA;EAA1DmB,CAAD,CADF,eAEE9C,oBAAC8C,KAAD,EAACA;IAAIC,SAAS;EAAbD,CAAD,EAAmDpB,QAAnD,CAFF,CAbF,CADF;AAoBF,CAhDO","names":["React","classNames","useGlobalEventListener","usePlatform","useTimeout","useDOM","Platform","RootComponent","stylesAlignX","center","left","right","stylesAlignY","top","bottom","PopoutWrapper","alignY","_param_alignY","_param_alignX","alignX","_param_closing","closing","_param_hasMask","hasMask","_param_fixed","fixed","children","onClick","restProps","platform","useState","opened","setOpened","onFadeInEnd","e","animationName","animationFinishFallback","IOS","useEffect","set","window","preventDefault","passive","baseClassName","onAnimationEnd","undefined","div","className"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\PopoutWrapper\\PopoutWrapper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './PopoutWrapper.module.css';\n\nconst stylesAlignX = {\n  center: styles['PopoutWrapper--alignX-center'],\n  left: styles['PopoutWrapper--alignX-left'],\n  right: styles['PopoutWrapper--alignX-right'],\n};\n\nconst stylesAlignY = {\n  center: styles['PopoutWrapper--alignY-center'],\n  top: styles['PopoutWrapper--alignY-top'],\n  bottom: styles['PopoutWrapper--alignY-bottom'],\n};\n\nexport interface PopoutWrapperProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: 'top' | 'center' | 'bottom';\n  alignX?: 'left' | 'center' | 'right';\n  closing?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport const PopoutWrapper = ({\n  alignY = 'center',\n  alignX = 'center',\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === styles['animation-full-fade-in']) {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(onFadeInEnd, platform === Platform.IOS ? 300 : 200);\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, 'touchmove', (e) => e.preventDefault(), {\n    passive: false,\n  });\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['PopoutWrapper'],\n        stylesAlignY[alignY],\n        stylesAlignX[alignX],\n        closing && styles['PopoutWrapper--closing'],\n        opened && styles['PopoutWrapper--opened'],\n        fixed && styles['PopoutWrapper--fixed'],\n        hasMask && styles['PopoutWrapper--masked'],\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n    >\n      <div className={styles['PopoutWrapper__container']}>\n        <div className={styles['PopoutWrapper__overlay']} onClick={onClick} />\n        <div className={styles['PopoutWrapper__content']}>{children}</div>\n      </div>\n    </RootComponent>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}