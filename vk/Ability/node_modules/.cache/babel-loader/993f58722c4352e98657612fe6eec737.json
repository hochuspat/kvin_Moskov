{"ast":null,"code":"import * as React from \"react\";\nimport { canUseDOM } from \"../lib/dom\";\nimport { useIsomorphicLayoutEffect } from \"../lib/useIsomorphicLayoutEffect\";\nexport function useTimeout(cb, duration) {\n  var options = React.useRef({\n    cb: cb,\n    duration: duration\n  });\n  useIsomorphicLayoutEffect(function () {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n  var timeout = React.useRef();\n  var clear = React.useCallback(function () {\n    if (canUseDOM && (timeout === null || timeout === void 0 ? void 0 : timeout.current)) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  var set = React.useCallback(function () {\n    var _$duration = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : options.current.duration;\n\n    clear();\n\n    if (canUseDOM) {\n      timeout.current = setTimeout(function () {\n        var _$cb = options.current.cb;\n        typeof _$cb === \"function\" && _$cb();\n      }, _$duration);\n    }\n  }, [clear]);\n  useIsomorphicLayoutEffect(function () {\n    return clear;\n  }, []);\n  return {\n    set: set,\n    clear: clear\n  };\n}","map":{"version":3,"mappings":"AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,yBAAT,QAA0C,kCAA1C;AAEA,OAAO,SAASC,UAAT,CAAoBC,EAApB,EAAmCC,QAAnC,EAAmD;EACxD,IAAMC,UAAUN,MAAMO,MAANP,CAAa;IAAEI,MAAF;IAAMC;EAAN,CAAbL,CAAhB;EACAE,0BAA0B;IACxBI,QAAQE,OAARF,CAAgBF,EAAhBE,GAAqBF,EAArBE;IACAA,QAAQE,OAARF,CAAgBD,QAAhBC,GAA2BD,QAA3BC;EACF,CAHAJ,EAGG,CAACE,EAAD,EAAKC,QAAL,CAHHH;EAKA,IAAMO,UAAUT,MAAMO,MAANP,EAAhB;EACA,IAAMU,QAAQV,MAAMW,WAANX,CAAkB;IAC9B,IAAIC,cAAaQ,0DAASD,OAAtBP,CAAJ,EAAmC;MACjCW,aAAaH,QAAQD,OAArBI;IACF;EACF,CAJcZ,EAIX,EAJWA,CAAd;EAKA,IAAMa,MAAMb,MAAMW,WAANX,CACV;QAACK,8EAAWC,QAAQE,OAARF,CAAgBD;;IAC1BK;;IACA,IAAIT,SAAJ,EAAe;MACbQ,QAAQD,OAARC,GAAkBK,WAAW;QAC3B,IAAMC,IAAEX,GAAOE,QAAQE,OAARF,CAAPF,EAAR;QACA,OAAOA,IAAP,KAAc,UAAd,IAA4BA,MAA5B;MACF,CAHkBU,EAGfT,UAHeS,CAAlBL;IAIF;EACF,CATUT,EAUV,CAACU,KAAD,CAVUV,CAAZ;EAYAE,0BAA0B;WAAMQ;GAAhCR,EAAuC,EAAvCA;EAEA,OAAO;IAAEW,QAAF;IAAOH;EAAP,CAAP;AACF","names":["React","canUseDOM","useIsomorphicLayoutEffect","useTimeout","cb","duration","options","useRef","current","timeout","clear","useCallback","clearTimeout","set","setTimeout","_$cb"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\hooks\\useTimeout.ts"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\nexport function useTimeout(cb: () => any, duration: number) {\n  const options = React.useRef({ cb, duration });\n  useIsomorphicLayoutEffect(() => {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n  const clear = React.useCallback(() => {\n    if (canUseDOM && timeout?.current) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  const set = React.useCallback(\n    (duration = options.current.duration) => {\n      clear();\n      if (canUseDOM) {\n        timeout.current = setTimeout(() => {\n          const { cb } = options.current;\n          typeof cb === 'function' && cb();\n        }, duration);\n      }\n    },\n    [clear],\n  );\n  useIsomorphicLayoutEffect(() => clear, []);\n\n  return { set, clear };\n}\n"]},"metadata":{},"sourceType":"module"}