{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { CustomScrollView } from \"../CustomScrollView/CustomScrollView\";\nimport { Popper } from \"../Popper/Popper\";\nimport { Spinner } from \"../Spinner/Spinner\";\n\nvar calcIsTop = function (placement) {\n  return placement === null || placement === void 0 ? void 0 : placement.includes(\"top\");\n};\n\nexport var CustomSelectDropdown = function (_param) {\n  var children = _param.children,\n      targetRef = _param.targetRef,\n      scrollBoxRef = _param.scrollBoxRef,\n      placement = _param.placement,\n      fetching = _param.fetching,\n      parentOnPlacementChange = _param.onPlacementChange,\n      _param_offsetDistance = _param.offsetDistance,\n      offsetDistance = _param_offsetDistance === void 0 ? 0 : _param_offsetDistance,\n      _param_sameWidth = _param.sameWidth,\n      sameWidth = _param_sameWidth === void 0 ? true : _param_sameWidth,\n      _param_forcePortal = _param.forcePortal,\n      forcePortal = _param_forcePortal === void 0 ? true : _param_forcePortal,\n      autoHideScrollbar = _param.autoHideScrollbar,\n      autoHideScrollbarDelay = _param.autoHideScrollbarDelay,\n      className = _param.className,\n      restProps = _object_without_properties(_param, [\"children\", \"targetRef\", \"scrollBoxRef\", \"placement\", \"fetching\", \"onPlacementChange\", \"offsetDistance\", \"sameWidth\", \"forcePortal\", \"autoHideScrollbar\", \"autoHideScrollbarDelay\", \"className\"]);\n\n  var _React_useState = _sliced_to_array(React.useState(function () {\n    return calcIsTop(placement);\n  }), 2),\n      isTop = _React_useState[0],\n      setIsTop = _React_useState[1];\n\n  var onPlacementChange = React.useCallback(function (param) {\n    var placement = param.placement;\n    setIsTop(calcIsTop(placement));\n    parentOnPlacementChange === null || parentOnPlacementChange === void 0 ? void 0 : parentOnPlacementChange(placement);\n  }, [parentOnPlacementChange, setIsTop]);\n  return /*#__PURE__*/React.createElement(Popper, _object_spread({\n    targetRef: targetRef,\n    offsetDistance: offsetDistance,\n    sameWidth: sameWidth,\n    onPlacementChange: onPlacementChange,\n    placement: placement,\n    className: classNames(\"vkuiCustomSelectDropdown\", \"vkuiInternalCustomSelectDropdown\", offsetDistance === 0 && (isTop ? \"vkuiCustomSelectDropdown--top\" : \"vkuiCustomSelectDropdown--bottom\"), sameWidth && classNames(\"vkuiCustomSelectDropdown--wide\", \"vkuiInternalCustomSelectDropdown--wide\"), className),\n    forcePortal: forcePortal,\n    autoUpdateOnTargetResize: true\n  }, restProps), /*#__PURE__*/React.createElement(CustomScrollView, {\n    boxRef: scrollBoxRef,\n    className: \"vkuiCustomSelectDropdown__in\",\n    autoHideScrollbar: autoHideScrollbar,\n    autoHideScrollbarDelay: autoHideScrollbarDelay\n  }, fetching ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomSelectDropdown__fetching\"\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    size: \"small\"\n  })) : children));\n};","map":{"version":3,"mappings":";;;AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AAGA,SAASC,gBAAT,QAAiC,sCAAjC;AAEA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,OAAT,QAAwB,oBAAxB;;AAgBA,IAAMC,YAAY,UAACC,SAAD,EAACA;SAA0BA,gEAAWC,QAAXD,CAAoB,KAApBA;CAA7C;;AAEA,OAAO,IAAME,uBAAuB;MAClCC;MACAC;MACAC;MACAL;MACAM;MACAC,uBAAmBC,UAAnBD;MAAAA,+BACAE;MAAAA,oDAAiB,CAAjBA,GAAiBC;MAAAC,0BACjBC;MAAAA,0CAAY,IAAZA,GAAYD;MAAAE,4BACZC;MAAAA,8CAAc,IAAdA,GAAcD;MACdE;MACAC;MACAC;MACGC,gDAZHf,UAYGe,EAXHd,WAWGc,EAVHb,cAUGa,EATHlB,WASGkB,EARHZ,UAQGY,EAPHX,mBAOGW,EANHT,gBAMGS,EALHN,WAKGM,EAJHJ,aAIGI,EAHHH,mBAGGG,EAFHF,wBAEGE,EADHD,WACGC;;EAEH,IAA0BxB,yCAAMyB,QAANzB,CAAe;WAAMK,UAAUC,SAAVD;GAArBL,KAA1B;EAAA,IAAO0B,QAAmB1B,kBAA1B;EAAA,IAAc2B,WAAY3B,kBAA1B;;EAEA,IAAMa,oBAAoBb,MAAM4B,WAAN5B,CACxB;QAAGM;IACDqB,SAAStB,UAAUC,SAAVD,CAATsB;IACAb,0GAA0BR,SAA1BQ;EACF,CAJwBd,EAKxB,CAACc,uBAAD,EAA0Ba,QAA1B,CALwB3B,CAA1B;EAQA,oBACEA,oBAACG,MAAD,EAACA;IACCO,WAAWA,SADZP;IAECY,gBAAgBA,cAFjBZ;IAGCe,WAAWA,SAHZf;IAICU,mBAAmBA,iBAJpBV;IAKCG,WAAWA,SALZH;IAMCoB,WAAWtB,uCAET,kCAFSA,EAGTc,mBAAmB,CAAnBA,KACGW,4EADHX,CAHSd,EAKTiB,aACEjB,6CAEE,wCAFFA,CANOA,EAUTsB,SAVStB,CANZE;IAkBCiB,aAAaA,WAlBdjB;IAmBC0B;EAnBD1B,GAoBKqB,SApBLrB,CAAD,EAoBMqB,aAEJxB,oBAACE,gBAAD,EAACA;IACC4B,QAAQnB,YADTT;IAECqB,SAAS,gCAFVrB;IAGCmB,mBAAmBA,iBAHpBnB;IAICoB,wBAAwBA;EAJzBpB,CAAD,EAMGU,wBACCZ,oBAAC+B,KAAD,EAACA;IAAIR,SAAS;EAAbQ,CAAD,eACE/B,oBAACI,OAAD,EAACA;IAAQ4B,MAAK;EAAb5B,CAAD,CADF,CADDQ,GAKCH,QAXJ,CAtBF,CADF;AAuCF,CAhEO","names":["React","classNames","CustomScrollView","Popper","Spinner","calcIsTop","placement","includes","CustomSelectDropdown","children","targetRef","scrollBoxRef","fetching","onPlacementChange","parentOnPlacementChange","offsetDistance","_param_offsetDistance","_param_sameWidth","sameWidth","_param_forcePortal","forcePortal","autoHideScrollbar","autoHideScrollbarDelay","className","restProps","useState","isTop","setIsTop","useCallback","autoUpdateOnTargetResize","boxRef","div","size"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\CustomSelectDropdown\\CustomSelectDropdown.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport type { Placement } from '../../lib/floating';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { CustomScrollView } from '../CustomScrollView/CustomScrollView';\nimport { TrackerOptionsProps } from '../CustomScrollView/useTrackerVisibility';\nimport { Popper } from '../Popper/Popper';\nimport { Spinner } from '../Spinner/Spinner';\nimport styles from './CustomSelectDropdown.module.css';\n\nexport interface CustomSelectDropdownProps\n  extends HTMLAttributesWithRootRef<HTMLDivElement>,\n    TrackerOptionsProps {\n  targetRef: React.RefObject<HTMLElement>;\n  placement?: Placement;\n  scrollBoxRef?: React.Ref<HTMLDivElement>;\n  fetching?: boolean;\n  offsetDistance?: number;\n  sameWidth?: boolean;\n  forcePortal?: boolean;\n  onPlacementChange?: (placement?: Placement) => void;\n}\n\nconst calcIsTop = (placement?: Placement) => placement?.includes('top');\n\nexport const CustomSelectDropdown = ({\n  children,\n  targetRef,\n  scrollBoxRef,\n  placement,\n  fetching,\n  onPlacementChange: parentOnPlacementChange,\n  offsetDistance = 0,\n  sameWidth = true,\n  forcePortal = true,\n  autoHideScrollbar,\n  autoHideScrollbarDelay,\n  className,\n  ...restProps\n}: CustomSelectDropdownProps) => {\n  const [isTop, setIsTop] = React.useState(() => calcIsTop(placement));\n\n  const onPlacementChange = React.useCallback(\n    ({ placement }: { placement?: Placement }) => {\n      setIsTop(calcIsTop(placement));\n      parentOnPlacementChange?.(placement);\n    },\n    [parentOnPlacementChange, setIsTop],\n  );\n\n  return (\n    <Popper\n      targetRef={targetRef}\n      offsetDistance={offsetDistance}\n      sameWidth={sameWidth}\n      onPlacementChange={onPlacementChange}\n      placement={placement}\n      className={classNames(\n        styles['CustomSelectDropdown'],\n        'vkuiInternalCustomSelectDropdown',\n        offsetDistance === 0 &&\n          (isTop ? styles['CustomSelectDropdown--top'] : styles['CustomSelectDropdown--bottom']),\n        sameWidth &&\n          classNames(\n            styles['CustomSelectDropdown--wide'],\n            'vkuiInternalCustomSelectDropdown--wide',\n          ),\n        className,\n      )}\n      forcePortal={forcePortal}\n      autoUpdateOnTargetResize\n      {...restProps}\n    >\n      <CustomScrollView\n        boxRef={scrollBoxRef}\n        className={styles['CustomSelectDropdown__in']}\n        autoHideScrollbar={autoHideScrollbar}\n        autoHideScrollbarDelay={autoHideScrollbarDelay}\n      >\n        {fetching ? (\n          <div className={styles['CustomSelectDropdown__fetching']}>\n            <Spinner size=\"small\" />\n          </div>\n        ) : (\n          children\n        )}\n      </CustomScrollView>\n    </Popper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}