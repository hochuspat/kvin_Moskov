{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useId } from \"../../hooks/useId\";\nimport { useOrientationChange } from \"../../hooks/useOrientationChange\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { SizeType } from \"../../lib/adaptivity\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { Platform } from \"../../lib/platform\";\nimport { multiRef } from \"../../lib/utils\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton\";\nimport { ModalRootContext, useModalRegistry } from \"../ModalRoot/ModalRootContext\";\nimport { ModalType } from \"../ModalRoot/types\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { ModalPageContext } from \"./ModalPageContext\";\nvar sizeClassName = {\n  s: \"vkuiModalPage--size-s\",\n  m: \"vkuiModalPage--size-m\",\n  l: \"vkuiModalPage--size-l\"\n};\nvar warn = warnOnce(\"ModalPage\");\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\n\nexport var ModalPage = function (_param) {\n  var children = _param.children,\n      header = _param.header,\n      tmp = _param.size,\n      sizeProp = tmp === void 0 ? \"s\" : tmp,\n      onOpen = _param.onOpen,\n      onOpened = _param.onOpened,\n      onClose = _param.onClose,\n      onClosed = _param.onClosed,\n      settlingHeight = _param.settlingHeight,\n      dynamicContentHeight = _param.dynamicContentHeight,\n      getModalContentRef = _param.getModalContentRef,\n      nav = _param.nav,\n      idProp = _param.id,\n      _param_hideCloseButton = _param.hideCloseButton,\n      hideCloseButton = _param_hideCloseButton === void 0 ? false : _param_hideCloseButton,\n      height = _param.height,\n      modalContentTestId = _param.modalContentTestId,\n      getRootRef = _param.getRootRef,\n      restProps = _object_without_properties(_param, [\"children\", \"header\", \"size\", \"onOpen\", \"onOpened\", \"onClose\", \"onClosed\", \"settlingHeight\", \"dynamicContentHeight\", \"getModalContentRef\", \"nav\", \"id\", \"hideCloseButton\", \"height\", \"modalContentTestId\", \"getRootRef\"]);\n\n  var generatingId = useId();\n  var id = idProp || generatingId;\n  var updateModalHeight = React.useContext(ModalRootContext).updateModalHeight;\n  var platform = usePlatform();\n  var orientation = useOrientationChange();\n\n  var _useAdaptivityWithJSMediaQueries = useAdaptivityWithJSMediaQueries(),\n      sizeX = _useAdaptivityWithJSMediaQueries.sizeX,\n      isDesktop = _useAdaptivityWithJSMediaQueries.isDesktop;\n\n  React.useEffect(function () {\n    if (dynamicContentHeight) {\n      updateModalHeight();\n    }\n  }, [children, dynamicContentHeight, orientation, updateModalHeight]);\n  var isCloseButtonShown = !hideCloseButton && isDesktop;\n  var size = isDesktop ? sizeProp : \"s\";\n  var modalContext = React.useContext(ModalRootContext);\n  var refs = useModalRegistry(getNavId({\n    nav: nav,\n    id: id\n  }, warn), ModalType.PAGE).refs;\n  var rootRef = useExternRef(getRootRef, refs.modalElement);\n  var contextValue = React.useMemo(function () {\n    return {\n      labelId: \"\".concat(id, \"-label\")\n    };\n  }, [id]);\n  return /*#__PURE__*/React.createElement(ModalPageContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    getRootRef: rootRef,\n    tabIndex: -1,\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    \"aria-labelledby\": contextValue.labelId,\n    id: id,\n    baseClassName: classNames(\"vkuiModalPage\", platform === Platform.IOS && \"vkuiModalPage--ios\", isDesktop && \"vkuiModalPage--desktop\", sizeX === SizeType.REGULAR && \"vkuiInternalModalPage--sizeX-regular\", typeof size === \"string\" && sizeClassName[size])\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__in-wrap\",\n    style: {\n      maxWidth: typeof size === \"number\" ? size : undefined,\n      height: height\n    },\n    ref: refs.innerElement\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__in\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__header\",\n    ref: refs.headerElement\n  }, header), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__content-wrap\"\n  }, /*#__PURE__*/React.createElement(\"div\", _object_spread({\n    className: \"vkuiModalPage__content\",\n    ref: multiRef(refs.contentElement, getModalContentRef)\n  }, modalContentTestId && {\n    \"data-testid\": modalContentTestId\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__content-in\"\n  }, children)), /*#__PURE__*/React.createElement(\"div\", {\n    ref: refs.bottomInset,\n    className: \"vkuiModalPage__bottom-inset\"\n  })), isCloseButtonShown && /*#__PURE__*/React.createElement(ModalDismissButton, {\n    onClick: onClose || modalContext.onClose\n  })))));\n};","map":{"version":3,"mappings":";;;AAAA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,+BAAT,QAAgD,6CAAhD;AACA,SAASC,YAAT,QAA6B,0BAA7B;AACA,SAASC,KAAT,QAAsB,mBAAtB;AACA,SAASC,oBAAT,QAAqC,kCAArC;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,QAAT,QAAyB,sBAAzB;AACA,SAASC,QAAT,QAAqC,oBAArC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,SAASC,kBAAT,QAAmC,0CAAnC;AACA,SAASC,gBAAT,EAA2BC,gBAA3B,QAAmD,+BAAnD;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,aAAT,QAA8B,gCAA9B;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AAGA,IAAMC,gBAAgB;EACpBC,CAAC,yBADmB;EAEpBC,CAAC,yBAFmB;EAGpBC,CAAC;AAHmB,CAAtB;AAqDA,IAAMC,OAAOX,SAAS,WAATA,CAAb;AAEA;;;;AAGA,OAAO,IAAMY,YAAY;MACvBC;MACAC;MACMC,aAANC;MAAMD,4BAAW,GAAXA;MACNE;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,MAAIC,UAAJD;MAAAA,gCACAE;MAAAA,sDAAkB,KAAlBA,GAAkBC;MAClBC;MACAC;MACAC;MACGC,gDAhBHnB,UAgBGmB,EAfHlB,QAeGkB,EAdHhB,MAcGgB,EAbHf,QAaGe,EAZHd,UAYGc,EAXHb,SAWGa,EAVHZ,UAUGY,EATHX,gBASGW,EARHV,sBAQGU,EAPHT,oBAOGS,EANHR,KAMGQ,EALHP,IAKGO,EAJHL,iBAIGK,EAHHH,QAGGG,EAFHF,oBAEGE,EADHD,YACGC;;EAEH,IAAMC,eAAexC,OAArB;EACA,IAAMgC,KAAKC,UAAUO,YAArB;EAEA,IAAMC,iBAAEA,GAAsB7C,MAAM8C,UAAN9C,CAAiBa,gBAAjBb,EAAtB6C,iBAAR;EAEA,IAAME,WAAWzC,aAAjB;EACA,IAAM0C,cAAc3C,sBAApB;;EACA,IAA6BH,oEAA7B;EAAA,IAAQ+C,QAAqB/C,iCAArB+C,KAAR;EAAA,IAAeC,YAAchD,iCAAdgD,SAAf;;EAEAlD,MAAMmD,SAANnD,CAAgB;IACd,IAAIiC,oBAAJ,EAA0B;MACxBY;IACF;EACF,CAJA7C,EAIG,CAACwB,QAAD,EAAWS,oBAAX,EAAiCe,WAAjC,EAA8CH,iBAA9C,CAJH7C;EAMA,IAAMoD,qBAAqB,CAACd,eAAD,IAAoBY,SAA/C;EACA,IAAMvB,OAAOuB,YAAYxB,QAAZwB,GAAuB,GAApC;EAEA,IAAMG,eAAerD,MAAM8C,UAAN9C,CAAiBa,gBAAjBb,CAArB;EACA,IAAMsD,IAAEA,GAASxC,iBAAiBN,SAAS;IAAE2B,QAAF;IAAOC;EAAP,CAAT5B,EAAsBc,IAAtBd,CAAjBM,EAA8CC,UAAUwC,IAAxDzC,EAATwC,IAAR;EACA,IAAME,UAAUrD,aAAauC,UAAbvC,EAAyBmD,KAAKG,YAA9BtD,CAAhB;EAEA,IAAMuD,eAAe1D,MAAM2D,OAAN3D,CAAc;WAAO;MAAE4D,SAAS,GAAMC,MAAN,CAAGzB,EAAH,EAAM,QAAN;IAAX;GAArBpC,EAAkD,CAACoC,EAAD,CAAlDpC,CAArB;EAEA,oBACEA,oBAACiB,iBAAiB6C,QAAlB,EAA0B;IAACC,OAAOL;EAAR,CAA1B,eACE1D,oBAACgB,aAAD,EAACA,wCACK2B,SADL3B,GACK2B;IACJD,YAAYc,OADRb;IAEJqB,UAAU,CAAC,CAFPrB;IAGJsB,MAAK,QAHDtB;IAIJuB,cAAW,MAJPvB;IAKJwB,mBAAiBT,aAAaE,OAL1BjB;IAMJP,IAAIA,EANAO;IAOJyB,eAAenE,4BAEb8C,aAAatC,SAAS4D,GAAtBtB,IAAyB,oBAFZ9C,EAGbiD,qCAHajD,EAIbgD,UAAU1C,SAAS+D,OAAnBrB,IAA8B,sCAJjBhD,EAKb,OAAO0B,IAAP,KAAgB,QAAhB,IAA4BT,aAAa,CAACS,IAAD,CAL5B1B;EAPX0C,CADL3B,CAAD,eAgBEhB,oBAACuE,KAAD,EAACA;IACCC,SAAS,0BADVD;IAECE,OAAO;MACLC,UAAU,OAAO/C,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAkCgD,SADvC;MAELnC;IAFK,CAFR+B;IAMCK,KAAKtB,KAAKuB;EANXN,CAAD,eAQEvE,oBAACuE,KAAD,EAACA;IAAIC,SAAS;EAAbD,CAAD,eACEvE,oBAACuE,KAAD,EAACA;IAAIC,SAAS,yBAAbD;IAA4CK,KAAKtB,KAAKwB;EAAtDP,CAAD,EACG9C,MADH,CADF,EAEKA,aAGHzB,oBAACuE,KAAD,EAACA;IAAIC,SAAS;EAAbD,CAAD,eACEvE,oBAACuE,KAAD,EAACA;IACCC,SAAS,0BADVD;IAECK,KAAKlE,SAAyB4C,KAAKyB,cAA9BrE,EAA8CwB,kBAA9CxB;EAFN6D,GAGM9B,sBAAsB;IAAE,eAAeA;EAAjB,CAH5B8B,CAAD,EAGiE,aAE/DvE,oBAACuE,KAAD,EAACA;IAAIC,SAAS;EAAbD,CAAD,EAAkD/C,QAAlD,CALF,CADF,EAMsDA,aAEpDxB,oBAACuE,KAAD,EAACA;IAAIK,KAAKtB,KAAK0B,WAAdT;IAA2BC,SAAS;EAApCD,CAAD,CARF,CALF,EAeGnB,mCAAsBpD,oBAACY,kBAAD,EAACA;IAAmBqE,SAASnD,WAAWuB,aAAavB;EAApDlB,CAAD,CAfzB,CARF,CAhBF,CADF,CADF;AA+CF,CA1FO","names":["React","classNames","useAdaptivityWithJSMediaQueries","useExternRef","useId","useOrientationChange","usePlatform","SizeType","getNavId","Platform","multiRef","warnOnce","ModalDismissButton","ModalRootContext","useModalRegistry","ModalType","RootComponent","ModalPageContext","sizeClassName","s","m","l","warn","ModalPage","children","header","sizeProp","size","onOpen","onOpened","onClose","onClosed","settlingHeight","dynamicContentHeight","getModalContentRef","nav","id","idProp","hideCloseButton","_param_hideCloseButton","height","modalContentTestId","getRootRef","restProps","generatingId","updateModalHeight","useContext","platform","orientation","sizeX","isDesktop","useEffect","isCloseButtonShown","modalContext","refs","PAGE","rootRef","modalElement","contextValue","useMemo","labelId","concat","Provider","value","tabIndex","role","aria-modal","aria-labelledby","baseClassName","IOS","REGULAR","div","className","style","maxWidth","undefined","ref","innerElement","headerElement","contentElement","bottomInset","onClick"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\ModalPage\\ModalPage.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useId } from '../../hooks/useId';\nimport { useOrientationChange } from '../../hooks/useOrientationChange';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { Platform } from '../../lib/platform';\nimport { multiRef } from '../../lib/utils';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { ModalRootContext, useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { ModalType } from '../ModalRoot/types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { ModalPageContext } from './ModalPageContext';\nimport styles from './ModalPage.module.css';\n\nconst sizeClassName = {\n  s: styles['ModalPage--size-s'],\n  m: styles['ModalPage--size-m'],\n  l: styles['ModalPage--size-l'],\n};\n\nexport interface ModalPageProps extends HTMLAttributesWithRootRef<HTMLDivElement>, NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: React.ReactNode;\n  /**\n   * Задаёт контенту максимальную ширину для десктопной версии.\n   */\n  size?: 's' | 'm' | 'l' | number;\n  /**\n   * Задаёт модальному окну фиксированную высоту.\n   * Можно передать числовое значение в пикселях, а можно строкой, в том числе и в процентах \"50%\".\n   * В мобильной версии 'settlingHeight' будет считаться относительно заданного height.\n   */\n  height?: string | number;\n  /**\n   * Будет вызвано при начале открытия модалки.\n   */\n  onOpen?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном открытии модалки.\n   */\n  onOpened?: VoidFunction;\n  /**\n   * Будет вызвано при начале закрытия модалки.\n   */\n  onClose?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном закрытии модалки.\n   */\n  onClosed?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: React.Ref<HTMLDivElement>;\n  /**\n   * Скрывает кнопку закрытия (актуально для iOS, т.к. можно отрисовать кнопку закрытия внутри модалки)\n   */\n  hideCloseButton?: boolean;\n  modalContentTestId?: string;\n}\n\nconst warn = warnOnce('ModalPage');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport const ModalPage = ({\n  children,\n  header,\n  size: sizeProp = 's',\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n  settlingHeight, // 75\n  dynamicContentHeight,\n  getModalContentRef,\n  nav,\n  id: idProp,\n  hideCloseButton = false,\n  height,\n  modalContentTestId,\n  getRootRef,\n  ...restProps\n}: ModalPageProps) => {\n  const generatingId = useId();\n  const id = idProp || generatingId;\n\n  const { updateModalHeight } = React.useContext(ModalRootContext);\n\n  const platform = usePlatform();\n  const orientation = useOrientationChange();\n  const { sizeX, isDesktop } = useAdaptivityWithJSMediaQueries();\n\n  React.useEffect(() => {\n    if (dynamicContentHeight) {\n      updateModalHeight();\n    }\n  }, [children, dynamicContentHeight, orientation, updateModalHeight]);\n\n  const isCloseButtonShown = !hideCloseButton && isDesktop;\n  const size = isDesktop ? sizeProp : 's';\n\n  const modalContext = React.useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId({ nav, id }, warn), ModalType.PAGE);\n  const rootRef = useExternRef(getRootRef, refs.modalElement);\n\n  const contextValue = React.useMemo(() => ({ labelId: `${id}-label` }), [id]);\n\n  return (\n    <ModalPageContext.Provider value={contextValue}>\n      <RootComponent\n        {...restProps}\n        getRootRef={rootRef}\n        tabIndex={-1}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby={contextValue.labelId}\n        id={id}\n        baseClassName={classNames(\n          styles['ModalPage'],\n          platform === Platform.IOS && styles['ModalPage--ios'],\n          isDesktop && styles['ModalPage--desktop'],\n          sizeX === SizeType.REGULAR && 'vkuiInternalModalPage--sizeX-regular',\n          typeof size === 'string' && sizeClassName[size],\n        )}\n      >\n        <div\n          className={styles['ModalPage__in-wrap']}\n          style={{\n            maxWidth: typeof size === 'number' ? size : undefined,\n            height,\n          }}\n          ref={refs.innerElement}\n        >\n          <div className={styles['ModalPage__in']}>\n            <div className={styles['ModalPage__header']} ref={refs.headerElement}>\n              {header}\n            </div>\n\n            <div className={styles['ModalPage__content-wrap']}>\n              <div\n                className={styles['ModalPage__content']}\n                ref={multiRef<HTMLDivElement>(refs.contentElement, getModalContentRef)}\n                {...(modalContentTestId && { 'data-testid': modalContentTestId })}\n              >\n                <div className={styles['ModalPage__content-in']}>{children}</div>\n              </div>\n              <div ref={refs.bottomInset} className={styles['ModalPage__bottom-inset']} />\n            </div>\n            {isCloseButtonShown && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n          </div>\n        </div>\n      </RootComponent>\n    </ModalPageContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}