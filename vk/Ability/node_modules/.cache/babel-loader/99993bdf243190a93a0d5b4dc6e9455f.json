{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useEventListener } from \"../../hooks/useEventListener\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { stopPropagation } from \"../../lib/utils\";\nimport { useTrackerVisibility } from \"./useTrackerVisibility\";\nexport var CustomScrollView = function (_param) {\n  var subscribe = function subscribe(el) {\n    if (el) {\n      listeners.forEach(function (l) {\n        return l.add(el);\n      });\n    }\n  };\n\n  var unsubscribe = function unsubscribe() {\n    listeners.forEach(function (l) {\n      return l.remove();\n    });\n  };\n\n  var className = _param.className,\n      children = _param.children,\n      externalBoxRef = _param.boxRef,\n      windowResize = _param.windowResize,\n      _param_autoHideScrollbar = _param.autoHideScrollbar,\n      autoHideScrollbar = _param_autoHideScrollbar === void 0 ? false : _param_autoHideScrollbar,\n      autoHideScrollbarDelay = _param.autoHideScrollbarDelay,\n      onScroll = _param.onScroll,\n      getRootRef = _param.getRootRef,\n      restProps = _object_without_properties(_param, [\"className\", \"children\", \"boxRef\", \"windowResize\", \"autoHideScrollbar\", \"autoHideScrollbarDelay\", \"onScroll\", \"getRootRef\"]);\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document,\n      window = _useDOM.window;\n\n  var ratio = React.useRef(NaN);\n  var lastTrackerTop = React.useRef(0);\n  var clientHeight = React.useRef(0);\n  var trackerHeight = React.useRef(0);\n  var scrollHeight = React.useRef(0);\n  var transformProp = React.useRef(\"\");\n  var startY = React.useRef(0);\n  var trackerTop = React.useRef(0);\n  var boxRef = useExternRef(externalBoxRef);\n  var barY = React.useRef(null);\n  var trackerY = React.useRef(null);\n\n  var setTrackerPosition = function (scrollTop) {\n    lastTrackerTop.current = scrollTop;\n\n    if (trackerY.current !== null) {\n      trackerY.current.style[transformProp.current] = \"translate(0, \".concat(scrollTop, \"px)\");\n    }\n  };\n\n  var setTrackerPositionFromScroll = function (scrollTop) {\n    var progress = scrollTop / (scrollHeight.current - clientHeight.current);\n    setTrackerPosition((clientHeight.current - trackerHeight.current) * progress);\n  };\n\n  var resize = function () {\n    if (!boxRef.current || !barY.current || !trackerY.current) {\n      return;\n    }\n\n    var localClientHeight = boxRef.current.clientHeight;\n    var localScrollHeight = boxRef.current.scrollHeight;\n    var localRatio = localClientHeight / localScrollHeight;\n    var localTrackerHeight = Math.max(localClientHeight * localRatio, 40);\n    ratio.current = localRatio;\n    clientHeight.current = localClientHeight;\n    scrollHeight.current = localScrollHeight;\n    trackerHeight.current = localTrackerHeight;\n\n    if (localRatio >= 1) {\n      barY.current.style.display = \"none\";\n    } else {\n      barY.current.style.display = \"\";\n      trackerY.current.style.height = \"\".concat(localTrackerHeight, \"px\");\n      setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    }\n  };\n\n  var resizeHandler = useEventListener(\"resize\", resize);\n  useIsomorphicLayoutEffect(function () {\n    if (windowResize && window) {\n      resizeHandler.add(window);\n    }\n  }, [windowResize, window]);\n  useIsomorphicLayoutEffect(function () {\n    var _trackerY_current;\n\n    var style = (_trackerY_current = trackerY.current) === null || _trackerY_current === void 0 ? void 0 : _trackerY_current.style;\n    var prop = \"\";\n\n    if (style !== undefined) {\n      if (\"transform\" in style) {\n        prop = \"transform\";\n      } else if (\"webkitTransform\" in style) {\n        prop = \"webkitTransform\";\n      }\n    }\n\n    transformProp.current = prop;\n  }, []);\n  useIsomorphicLayoutEffect(resize);\n\n  var setScrollPositionFromTracker = function (trackerTop) {\n    var progress = trackerTop / (clientHeight.current - trackerHeight.current);\n\n    if (boxRef.current !== null) {\n      boxRef.current.scrollTop = (scrollHeight.current - clientHeight.current) * progress;\n    }\n  };\n\n  var onMove = function (e) {\n    e.preventDefault();\n    var diff = e.clientY - startY.current;\n    var position = Math.min(Math.max(trackerTop.current + diff, 0), clientHeight.current - trackerHeight.current);\n    setScrollPositionFromTracker(position);\n  };\n\n  var _useTrackerVisibility = useTrackerVisibility(autoHideScrollbar, autoHideScrollbarDelay),\n      trackerVisible = _useTrackerVisibility.trackerVisible,\n      onTargetScroll = _useTrackerVisibility.onTargetScroll,\n      onTrackerDragStart = _useTrackerVisibility.onTrackerDragStart,\n      onTrackerDragStop = _useTrackerVisibility.onTrackerDragStop,\n      onTrackerMouseEnter = _useTrackerVisibility.onTrackerMouseEnter,\n      onTrackerMouseLeave = _useTrackerVisibility.onTrackerMouseLeave;\n\n  var onUp = function (e) {\n    e.preventDefault();\n\n    if (autoHideScrollbar) {\n      onTrackerDragStop();\n    }\n\n    unsubscribe();\n  };\n\n  var scroll = function (event) {\n    if (ratio.current >= 1 || !boxRef.current) {\n      return;\n    }\n\n    if (autoHideScrollbar) {\n      onTargetScroll();\n    }\n\n    setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    onScroll === null || onScroll === void 0 ? void 0 : onScroll(event);\n  };\n\n  var listeners = [useEventListener(\"mousemove\", onMove), useEventListener(\"mouseup\", onUp)];\n\n  var onDragStart = function (e) {\n    e.preventDefault();\n    startY.current = e.clientY;\n    trackerTop.current = lastTrackerTop.current;\n\n    if (autoHideScrollbar) {\n      onTrackerDragStart();\n    }\n\n    subscribe(document);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", _object_spread({\n    className: classNames(\"vkuiCustomScrollView\", className),\n    ref: getRootRef\n  }, restProps), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomScrollView__box\",\n    tabIndex: -1,\n    ref: boxRef,\n    onScroll: scroll\n  }, children), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomScrollView__barY\",\n    ref: barY,\n    onClick: stopPropagation\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiCustomScrollView__trackerY\", !trackerVisible && \"vkuiCustomScrollView__trackerY--hidden\"),\n    onMouseEnter: autoHideScrollbar ? onTrackerMouseEnter : undefined,\n    onMouseLeave: autoHideScrollbar ? onTrackerMouseLeave : undefined,\n    ref: trackerY,\n    onMouseDown: onDragStart\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","classNames","useEventListener","useExternRef","useDOM","useIsomorphicLayoutEffect","stopPropagation","useTrackerVisibility","CustomScrollView","subscribe","el","listeners","forEach","l","add","unsubscribe","remove","className","children","boxRef","externalBoxRef","windowResize","autoHideScrollbar","_param_autoHideScrollbar","autoHideScrollbarDelay","onScroll","getRootRef","restProps","document","window","ratio","useRef","NaN","lastTrackerTop","clientHeight","trackerHeight","scrollHeight","transformProp","startY","trackerTop","barY","trackerY","setTrackerPosition","scrollTop","current","style","concat","setTrackerPositionFromScroll","progress","resize","localClientHeight","localScrollHeight","localRatio","localTrackerHeight","Math","max","display","height","resizeHandler","prop","undefined","setScrollPositionFromTracker","onMove","e","preventDefault","diff","clientY","position","min","trackerVisible","onTargetScroll","onTrackerDragStart","onTrackerDragStop","onTrackerMouseEnter","onTrackerMouseLeave","onUp","scroll","event","onDragStart","div","ref","tabIndex","onClick","onMouseEnter","onMouseLeave","onMouseDown"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\CustomScrollView\\CustomScrollView.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { DOMProps, useDOM } from '../../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { stopPropagation } from '../../lib/utils';\nimport type { HasRootRef } from '../../types';\nimport { TrackerOptionsProps, useTrackerVisibility } from './useTrackerVisibility';\nimport styles from './CustomScrollView.module.css';\n\nexport interface CustomScrollViewProps\n  extends React.AllHTMLAttributes<HTMLDivElement>,\n    DOMProps, // TODO [>=6]: remove\n    HasRootRef<HTMLDivElement>,\n    TrackerOptionsProps {\n  windowResize?: boolean;\n  boxRef?: React.Ref<HTMLDivElement>;\n  className?: HTMLDivElement['className'];\n  onScroll?(event: React.UIEvent<HTMLDivElement>): void;\n  children: React.ReactNode;\n}\n\nexport const CustomScrollView = ({\n  className,\n  children,\n  boxRef: externalBoxRef,\n  windowResize,\n  autoHideScrollbar = false,\n  autoHideScrollbarDelay,\n  onScroll,\n  getRootRef,\n  ...restProps\n}: CustomScrollViewProps) => {\n  const { document, window } = useDOM();\n\n  const ratio = React.useRef(NaN);\n  const lastTrackerTop = React.useRef(0);\n  const clientHeight = React.useRef(0);\n  const trackerHeight = React.useRef(0);\n  const scrollHeight = React.useRef(0);\n  const transformProp = React.useRef('');\n  const startY = React.useRef(0);\n  const trackerTop = React.useRef(0);\n\n  const boxRef = useExternRef(externalBoxRef);\n\n  const barY = React.useRef<HTMLDivElement>(null);\n  const trackerY = React.useRef<HTMLDivElement>(null);\n\n  const setTrackerPosition = (scrollTop: number) => {\n    lastTrackerTop.current = scrollTop;\n    if (trackerY.current !== null) {\n      (trackerY.current.style as any)[transformProp.current] = `translate(0, ${scrollTop}px)`;\n    }\n  };\n\n  const setTrackerPositionFromScroll = (scrollTop: number) => {\n    const progress = scrollTop / (scrollHeight.current - clientHeight.current);\n    setTrackerPosition((clientHeight.current - trackerHeight.current) * progress);\n  };\n\n  const resize = () => {\n    if (!boxRef.current || !barY.current || !trackerY.current) {\n      return;\n    }\n    const localClientHeight = boxRef.current.clientHeight;\n    const localScrollHeight = boxRef.current.scrollHeight;\n    const localRatio = localClientHeight / localScrollHeight;\n    const localTrackerHeight = Math.max(localClientHeight * localRatio, 40);\n\n    ratio.current = localRatio;\n    clientHeight.current = localClientHeight;\n    scrollHeight.current = localScrollHeight;\n    trackerHeight.current = localTrackerHeight;\n\n    if (localRatio >= 1) {\n      barY.current.style.display = 'none';\n    } else {\n      barY.current.style.display = '';\n      trackerY.current.style.height = `${localTrackerHeight}px`;\n      setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    }\n  };\n\n  const resizeHandler = useEventListener('resize', resize);\n\n  useIsomorphicLayoutEffect(() => {\n    if (windowResize && window) {\n      resizeHandler.add(window);\n    }\n  }, [windowResize, window]);\n\n  useIsomorphicLayoutEffect(() => {\n    let style = trackerY.current?.style;\n    let prop = '';\n    if (style !== undefined) {\n      if ('transform' in style) {\n        prop = 'transform';\n      } else if ('webkitTransform' in style) {\n        prop = 'webkitTransform';\n      }\n    }\n    transformProp.current = prop;\n  }, []);\n\n  useIsomorphicLayoutEffect(resize);\n\n  const setScrollPositionFromTracker = (trackerTop: number) => {\n    const progress = trackerTop / (clientHeight.current - trackerHeight.current);\n    if (boxRef.current !== null) {\n      boxRef.current.scrollTop = (scrollHeight.current - clientHeight.current) * progress;\n    }\n  };\n\n  const onMove = (e: MouseEvent) => {\n    e.preventDefault();\n    const diff = e.clientY - startY.current;\n    const position = Math.min(\n      Math.max(trackerTop.current + diff, 0),\n      clientHeight.current - trackerHeight.current,\n    );\n\n    setScrollPositionFromTracker(position);\n  };\n\n  const {\n    trackerVisible,\n    onTargetScroll,\n    onTrackerDragStart,\n    onTrackerDragStop,\n    onTrackerMouseEnter,\n    onTrackerMouseLeave,\n  } = useTrackerVisibility(autoHideScrollbar, autoHideScrollbarDelay);\n\n  const onUp = (e: MouseEvent) => {\n    e.preventDefault();\n\n    if (autoHideScrollbar) {\n      onTrackerDragStop();\n    }\n\n    unsubscribe();\n  };\n\n  const scroll = (event: React.UIEvent<HTMLDivElement>) => {\n    if (ratio.current >= 1 || !boxRef.current) {\n      return;\n    }\n\n    if (autoHideScrollbar) {\n      onTargetScroll();\n    }\n\n    setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    onScroll?.(event);\n  };\n\n  const listeners = [useEventListener('mousemove', onMove), useEventListener('mouseup', onUp)];\n\n  function subscribe(el: Document | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  const onDragStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    startY.current = e.clientY;\n    trackerTop.current = lastTrackerTop.current;\n\n    if (autoHideScrollbar) {\n      onTrackerDragStart();\n    }\n\n    subscribe(document);\n  };\n\n  return (\n    <div\n      className={classNames(styles['CustomScrollView'], className)}\n      ref={getRootRef}\n      {...restProps}\n    >\n      <div className={styles['CustomScrollView__box']} tabIndex={-1} ref={boxRef} onScroll={scroll}>\n        {children}\n      </div>\n\n      <div className={styles['CustomScrollView__barY']} ref={barY} onClick={stopPropagation}>\n        <div\n          className={classNames(\n            styles['CustomScrollView__trackerY'],\n            !trackerVisible && styles['CustomScrollView__trackerY--hidden'],\n          )}\n          onMouseEnter={autoHideScrollbar ? onTrackerMouseEnter : undefined}\n          onMouseLeave={autoHideScrollbar ? onTrackerMouseLeave : undefined}\n          ref={trackerY}\n          onMouseDown={onDragStart}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}