{"ast":null,"code":"import * as React from \"react\";\nimport { hasMouse as _hasPointer } from \"@vkontakte/vkjs\";\nimport { useBridgeAdaptivity } from \"../../hooks/useBridgeAdaptivity\";\nimport { BREAKPOINTS, SizeType, ViewHeight, ViewWidth } from \"../../lib/adaptivity\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { AdaptivityContext } from \"./AdaptivityContext\";\nvar warn = warnOnce(\"AdaptivityProvider\");\n/**\n * @see https://vkcom.github.io/VKUI/#/AdaptivityProvider\n */\n\nexport var AdaptivityProvider = function (param) {\n  var viewWidth = param.viewWidth,\n      viewHeight = param.viewHeight,\n      sizeX = param.sizeX,\n      sizeY = param.sizeY,\n      hasPointer = param.hasPointer,\n      hasHover = param.hasHover,\n      children = param.children; // TODO [>=6]: удалить использование хука (#5049)\n\n  /* eslint-disable @typescript-eslint/naming-convention */\n\n  var LEGACY_isPerhapsPropsByBridgeTypeAdaptive = viewWidth !== undefined && viewHeight !== undefined;\n  var LEGACY_isPerhapsPropsByBridgeTypeForceMobile = viewWidth !== undefined && sizeX !== undefined && sizeY !== undefined;\n  var LEGACY_disableInternalUseBridgeAdaptivity = LEGACY_isPerhapsPropsByBridgeTypeAdaptive || LEGACY_isPerhapsPropsByBridgeTypeForceMobile;\n  var LEGACY_bridge = useBridgeAdaptivity(LEGACY_disableInternalUseBridgeAdaptivity);\n  /* eslint-enable @typescript-eslint/naming-convention */\n\n  if (process.env.NODE_ENV === \"development\") {\n    // TODO [>=6]: удалить warn\n    if (!LEGACY_disableInternalUseBridgeAdaptivity) {\n      warn(\"[@vkontakte/vk-bridge] Интеграция VKUI с @vkontakte/vk-bridge устарела и будет удалена в v6. Используйте хук `useAdaptivity()` из @vkontakte/vk-bridge-react и результат передайте в компонент (см. https://github.com/VKCOM/VKUI/issues/5049)\"); // prettier-ignore\n    }\n  }\n\n  var adaptivity = React.useMemo(function () {\n    return calculateAdaptivity({\n      viewWidth: viewWidth,\n      viewHeight: viewHeight,\n      sizeX: sizeX,\n      sizeY: sizeY,\n      hasPointer: hasPointer,\n      hasHover: hasHover\n    }, LEGACY_bridge);\n  }, [viewWidth, viewHeight, sizeX, sizeY, hasPointer, hasHover, LEGACY_bridge]);\n  return /*#__PURE__*/React.createElement(AdaptivityContext.Provider, {\n    value: adaptivity\n  }, children);\n};\n\nfunction calculateAdaptivity(param, LEGACY_bridge) {\n  var viewWidth = param.viewWidth,\n      viewHeight = param.viewHeight,\n      sizeX = param.sizeX,\n      sizeY = param.sizeY,\n      hasPointer = param.hasPointer,\n      hasHover = param.hasHover; // TODO [>=6]: удалить блок кода c использованием LEGACY_bridge (#5049)\n  //  https://github.com/VKCOM/VKUI/blob/v5.5.5/packages/vkui/src/components/AdaptivityProvider/AdaptivityProvider.tsx#L46-L92\n\n  if (LEGACY_bridge.type === \"adaptive\") {\n    var viewportWidth = LEGACY_bridge.viewportWidth,\n        viewportHeight = LEGACY_bridge.viewportHeight;\n\n    if (viewportWidth >= BREAKPOINTS.DESKTOP) {\n      viewWidth = ViewWidth.DESKTOP;\n    } else if (viewportWidth >= BREAKPOINTS.TABLET) {\n      viewWidth = ViewWidth.TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.SMALL_TABLET) {\n      viewWidth = ViewWidth.SMALL_TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.MOBILE) {\n      viewWidth = ViewWidth.MOBILE;\n    } else {\n      viewWidth = ViewWidth.SMALL_MOBILE;\n    }\n\n    if (viewportHeight >= BREAKPOINTS.MEDIUM_HEIGHT) {\n      viewHeight = ViewHeight.MEDIUM;\n    } else if (viewportHeight >= BREAKPOINTS.MOBILE_LANDSCAPE_HEIGHT) {\n      viewHeight = ViewHeight.SMALL;\n    } else {\n      viewHeight = ViewHeight.EXTRA_SMALL;\n    }\n\n    if (viewWidth <= ViewWidth.MOBILE) {\n      sizeX = SizeType.COMPACT;\n    } else {\n      sizeX = SizeType.REGULAR;\n    }\n\n    if (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer || viewHeight <= ViewHeight.EXTRA_SMALL) {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else if (LEGACY_bridge.type === \"force_mobile\" || LEGACY_bridge.type === \"force_mobile_compact\") {\n    viewWidth = ViewWidth.MOBILE;\n    sizeX = SizeType.COMPACT;\n\n    if (LEGACY_bridge.type === \"force_mobile_compact\") {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else {\n    if (sizeX === undefined && viewWidth !== undefined) {\n      if (viewWidth <= ViewWidth.MOBILE) {\n        sizeX = SizeType.COMPACT;\n      } else {\n        sizeX = SizeType.REGULAR;\n      }\n    }\n\n    if (sizeY === undefined && viewWidth !== undefined && viewHeight !== undefined) {\n      if (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer || viewHeight <= ViewHeight.EXTRA_SMALL) {\n        sizeY = SizeType.COMPACT;\n      } else {\n        sizeY = SizeType.REGULAR;\n      }\n    }\n  }\n\n  return {\n    viewWidth: viewWidth,\n    viewHeight: viewHeight,\n    sizeX: sizeX,\n    sizeY: sizeY,\n    hasPointer: hasPointer,\n    hasHover: hasHover\n  };\n}","map":{"version":3,"mappings":"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","names":["React","hasMouse","_hasPointer","useBridgeAdaptivity","BREAKPOINTS","SizeType","ViewHeight","ViewWidth","warnOnce","AdaptivityContext","warn","AdaptivityProvider","viewWidth","viewHeight","sizeX","sizeY","hasPointer","hasHover","children","LEGACY_isPerhapsPropsByBridgeTypeAdaptive","undefined","LEGACY_isPerhapsPropsByBridgeTypeForceMobile","LEGACY_disableInternalUseBridgeAdaptivity","LEGACY_bridge","process","env","NODE_ENV","adaptivity","useMemo","calculateAdaptivity","Provider","value","param","type","viewportWidth","viewportHeight","DESKTOP","TABLET","SMALL_TABLET","MOBILE","SMALL_MOBILE","MEDIUM_HEIGHT","MEDIUM","MOBILE_LANDSCAPE_HEIGHT","SMALL","EXTRA_SMALL","COMPACT","REGULAR"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\AdaptivityProvider\\AdaptivityProvider.tsx"],"sourcesContent":["import * as React from 'react';\nimport { hasMouse as _hasPointer } from '@vkontakte/vkjs';\nimport { BridgeAdaptivity, useBridgeAdaptivity } from '../../hooks/useBridgeAdaptivity';\nimport { BREAKPOINTS, SizeType, ViewHeight, ViewWidth } from '../../lib/adaptivity';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HasChildren } from '../../types';\nimport { AdaptivityContext, type AdaptivityProps } from './AdaptivityContext';\n\nconst warn = warnOnce('AdaptivityProvider');\n\nexport interface AdaptivityProviderProps extends AdaptivityProps, HasChildren {}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/AdaptivityProvider\n */\nexport const AdaptivityProvider = ({\n  viewWidth,\n  viewHeight,\n  sizeX,\n  sizeY,\n  hasPointer,\n  hasHover,\n  children,\n}: AdaptivityProviderProps) => {\n  // TODO [>=6]: удалить использование хука (#5049)\n  /* eslint-disable @typescript-eslint/naming-convention */\n  const LEGACY_isPerhapsPropsByBridgeTypeAdaptive =\n    viewWidth !== undefined && viewHeight !== undefined;\n  const LEGACY_isPerhapsPropsByBridgeTypeForceMobile =\n    viewWidth !== undefined && sizeX !== undefined && sizeY !== undefined;\n  const LEGACY_disableInternalUseBridgeAdaptivity =\n    LEGACY_isPerhapsPropsByBridgeTypeAdaptive || LEGACY_isPerhapsPropsByBridgeTypeForceMobile;\n  const LEGACY_bridge = useBridgeAdaptivity(LEGACY_disableInternalUseBridgeAdaptivity);\n  /* eslint-enable @typescript-eslint/naming-convention */\n\n  if (process.env.NODE_ENV === 'development') {\n    // TODO [>=6]: удалить warn\n    if (!LEGACY_disableInternalUseBridgeAdaptivity) {\n      warn(\"[@vkontakte/vk-bridge] Интеграция VKUI с @vkontakte/vk-bridge устарела и будет удалена в v6. Используйте хук `useAdaptivity()` из @vkontakte/vk-bridge-react и результат передайте в компонент (см. https://github.com/VKCOM/VKUI/issues/5049)\"); // prettier-ignore\n    }\n  }\n\n  const adaptivity = React.useMemo(\n    () =>\n      calculateAdaptivity(\n        {\n          viewWidth,\n          viewHeight,\n          sizeX,\n          sizeY,\n          hasPointer,\n          hasHover,\n        },\n        LEGACY_bridge,\n      ),\n    [viewWidth, viewHeight, sizeX, sizeY, hasPointer, hasHover, LEGACY_bridge],\n  );\n\n  return <AdaptivityContext.Provider value={adaptivity}>{children}</AdaptivityContext.Provider>;\n};\n\nfunction calculateAdaptivity(\n  { viewWidth, viewHeight, sizeX, sizeY, hasPointer, hasHover }: AdaptivityProps,\n  LEGACY_bridge: BridgeAdaptivity, // eslint-disable-line @typescript-eslint/naming-convention\n) {\n  // TODO [>=6]: удалить блок кода c использованием LEGACY_bridge (#5049)\n  //  https://github.com/VKCOM/VKUI/blob/v5.5.5/packages/vkui/src/components/AdaptivityProvider/AdaptivityProvider.tsx#L46-L92\n  if (LEGACY_bridge.type === 'adaptive') {\n    const { viewportWidth, viewportHeight } = LEGACY_bridge;\n\n    if (viewportWidth >= BREAKPOINTS.DESKTOP) {\n      viewWidth = ViewWidth.DESKTOP;\n    } else if (viewportWidth >= BREAKPOINTS.TABLET) {\n      viewWidth = ViewWidth.TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.SMALL_TABLET) {\n      viewWidth = ViewWidth.SMALL_TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.MOBILE) {\n      viewWidth = ViewWidth.MOBILE;\n    } else {\n      viewWidth = ViewWidth.SMALL_MOBILE;\n    }\n\n    if (viewportHeight >= BREAKPOINTS.MEDIUM_HEIGHT) {\n      viewHeight = ViewHeight.MEDIUM;\n    } else if (viewportHeight >= BREAKPOINTS.MOBILE_LANDSCAPE_HEIGHT) {\n      viewHeight = ViewHeight.SMALL;\n    } else {\n      viewHeight = ViewHeight.EXTRA_SMALL;\n    }\n\n    if (viewWidth <= ViewWidth.MOBILE) {\n      sizeX = SizeType.COMPACT;\n    } else {\n      sizeX = SizeType.REGULAR;\n    }\n\n    if (\n      (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer) ||\n      viewHeight <= ViewHeight.EXTRA_SMALL\n    ) {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else if (\n    LEGACY_bridge.type === 'force_mobile' ||\n    LEGACY_bridge.type === 'force_mobile_compact'\n  ) {\n    viewWidth = ViewWidth.MOBILE;\n    sizeX = SizeType.COMPACT;\n\n    if (LEGACY_bridge.type === 'force_mobile_compact') {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else {\n    if (sizeX === undefined && viewWidth !== undefined) {\n      if (viewWidth <= ViewWidth.MOBILE) {\n        sizeX = SizeType.COMPACT;\n      } else {\n        sizeX = SizeType.REGULAR;\n      }\n    }\n    if (sizeY === undefined && viewWidth !== undefined && viewHeight !== undefined) {\n      if (\n        (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer) ||\n        viewHeight <= ViewHeight.EXTRA_SMALL\n      ) {\n        sizeY = SizeType.COMPACT;\n      } else {\n        sizeY = SizeType.REGULAR;\n      }\n    }\n  }\n\n  return {\n    viewWidth,\n    viewHeight,\n    sizeX,\n    sizeY,\n    hasPointer,\n    hasHover,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}