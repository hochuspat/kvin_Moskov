{"ast":null,"code":"import { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { Icon24Dismiss } from \"@vkontakte/icons\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { Button } from \"../Button/Button\";\nimport { Image } from \"../Image/Image\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { SimpleCell } from \"../SimpleCell/SimpleCell\";\nimport { Footnote } from \"../Typography/Footnote/Footnote\";\nvar warn = warnOnce(\"PromoBanner\"); // TODO [>=6]: Удалить компонент\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n * @deprecated v5.3.1\n *\n * Используйте событие [VKWebAppShowBannerAd](https://dev.vk.com/mini-apps/monetization/ad/banners)\n */\n\nexport var PromoBanner = function (_param) {\n  var _param_bannerData = _param.bannerData,\n      bannerData = _param_bannerData === void 0 ? {} : _param_bannerData,\n      onClose = _param.onClose,\n      isCloseButtonHidden = _param.isCloseButtonHidden,\n      restProps = _object_without_properties(_param, [\"bannerData\", \"onClose\", \"isCloseButtonHidden\"]);\n\n  if (process.env.NODE_ENV === \"development\") {\n    warn(\"Компонент устарел и будет удален в v6. Используйте событие VKWebAppShowBannerAd https://dev.vk.com/mini-apps/monetization/ad/banners\");\n  }\n\n  var _React_useState = _sliced_to_array(React.useState(\"\"), 2),\n      currentPixel = _React_useState[0],\n      setCurrentPixel = _React_useState[1];\n\n  var statsPixels = React.useMemo(function () {\n    return bannerData.statistics ? bannerData.statistics.reduce(function (acc, item) {\n      return _object_spread_props(_object_spread({}, acc), _define_property({}, item.type, item.url));\n    }, {}) : {};\n  }, [bannerData.statistics]);\n  var onClick = React.useCallback(function () {\n    return setCurrentPixel(statsPixels.click || \"\");\n  }, [statsPixels.click]);\n  React.useEffect(function () {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread({\n    baseClassName: \"vkuiPromoBanner\"\n  }, restProps), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__head\"\n  }, /*#__PURE__*/React.createElement(Footnote, null, bannerData.advertisingLabel || \"Advertisement\"), bannerData.ageRestrictions && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiPromoBanner__age\"\n  }, bannerData.ageRestrictions), !isCloseButtonHidden && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__close\",\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(Icon24Dismiss, null))), /*#__PURE__*/React.createElement(SimpleCell, {\n    href: bannerData.trackingLink,\n    onClick: onClick,\n    rel: \"nofollow noopener noreferrer\",\n    target: \"_blank\",\n    before: bannerData.iconLink && /*#__PURE__*/React.createElement(Image, {\n      size: 48,\n      src: bannerData.iconLink,\n      alt: bannerData.title,\n      \"data-testid\": process.env.NODE_ENV === \"test\" ? \"avatar\" : undefined\n    }),\n    after: bannerData.ctaText && /*#__PURE__*/React.createElement(Button, {\n      mode: \"outline\",\n      \"data-testid\": process.env.NODE_ENV === \"test\" ? \"button-ctaText\" : undefined\n    }, bannerData.ctaText),\n    subtitle: bannerData.domain\n  }, bannerData.title), currentPixel.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__pixels\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: currentPixel,\n    alt: \"\"\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","Icon24Dismiss","warnOnce","Button","Image","RootComponent","SimpleCell","Footnote","warn","PromoBanner","bannerData","_param_bannerData","onClose","isCloseButtonHidden","restProps","process","env","NODE_ENV","useState","currentPixel","setCurrentPixel","statsPixels","useMemo","statistics","reduce","acc","item","_object_spread_props","_define_property","type","url","onClick","useCallback","click","useEffect","playbackStarted","baseClassName","div","className","advertisingLabel","ageRestrictions","href","trackingLink","rel","target","before","iconLink","size","src","alt","title","data-testid","undefined","after","ctaText","mode","subtitle","domain","length","img"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\PromoBanner\\PromoBanner.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { Button } from '../Button/Button';\nimport { Image } from '../Image/Image';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { SimpleCell } from '../SimpleCell/SimpleCell';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './PromoBanner.module.css';\n\nconst warn = warnOnce('PromoBanner');\n\ntype StatsType =\n  | 'playbackStarted' // Начало показа\n  | 'click'; // Клик по баннеру\n\ntype BannerData = {\n  title?: string;\n  url_types?: string;\n  bannerID?: string;\n  imageWidth?: number;\n  imageHeight?: number;\n  imageLink?: string;\n  trackingLink?: string;\n  type?: string;\n  iconWidth?: number;\n  domain?: string;\n  ctaText?: string;\n  advertisingLabel?: string;\n  iconLink?: string;\n  statistics?: Array<{ type: StatsType; url: string }>;\n  openInBrowser?: boolean;\n  iconHeight?: number;\n  directLink?: boolean;\n  navigationType?: string;\n  description?: string;\n  ageRestrictions?: string;\n};\n\nexport interface PromoBannerProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  /** Данные рекламного баннера, полученные из VKWebAppGetAds */\n  bannerData: BannerData;\n  /** Флаг скрытия кнопки закрытия рекламы */\n  isCloseButtonHidden?: boolean;\n  /** Хандлер закрытия рекламы */\n  onClose: () => void;\n}\n\n// TODO [>=6]: Удалить компонент\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n * @deprecated v5.3.1\n *\n * Используйте событие [VKWebAppShowBannerAd](https://dev.vk.com/mini-apps/monetization/ad/banners)\n */\nexport const PromoBanner = ({\n  bannerData = {},\n  onClose,\n  isCloseButtonHidden,\n  ...restProps\n}: PromoBannerProps) => {\n  if (process.env.NODE_ENV === 'development') {\n    warn(\n      'Компонент устарел и будет удален в v6. Используйте событие VKWebAppShowBannerAd https://dev.vk.com/mini-apps/monetization/ad/banners',\n    );\n  }\n\n  const [currentPixel, setCurrentPixel] = React.useState('');\n\n  const statsPixels = React.useMemo(\n    () =>\n      (bannerData.statistics\n        ? bannerData.statistics.reduce((acc, item) => ({ ...acc, [item.type]: item.url }), {})\n        : {}) as Record<StatsType, string | void>,\n    [bannerData.statistics],\n  );\n\n  const onClick = React.useCallback(\n    () => setCurrentPixel(statsPixels.click || ''),\n    [statsPixels.click],\n  );\n\n  React.useEffect(() => {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n\n  return (\n    <RootComponent baseClassName={styles['PromoBanner']} {...restProps}>\n      <div className={styles['PromoBanner__head']}>\n        <Footnote>{bannerData.advertisingLabel || 'Advertisement'}</Footnote>\n        {bannerData.ageRestrictions && (\n          <Footnote className={styles['PromoBanner__age']}>{bannerData.ageRestrictions}</Footnote>\n        )}\n\n        {!isCloseButtonHidden && (\n          <div className={styles['PromoBanner__close']} onClick={onClose}>\n            <Icon24Dismiss />\n          </div>\n        )}\n      </div>\n      <SimpleCell\n        href={bannerData.trackingLink}\n        onClick={onClick}\n        rel=\"nofollow noopener noreferrer\"\n        target=\"_blank\"\n        before={\n          bannerData.iconLink && (\n            <Image\n              size={48}\n              src={bannerData.iconLink}\n              alt={bannerData.title}\n              data-testid={process.env.NODE_ENV === 'test' ? 'avatar' : undefined}\n            />\n          )\n        }\n        after={\n          bannerData.ctaText && (\n            <Button\n              mode=\"outline\"\n              data-testid={process.env.NODE_ENV === 'test' ? 'button-ctaText' : undefined}\n            >\n              {bannerData.ctaText}\n            </Button>\n          )\n        }\n        subtitle={bannerData.domain}\n      >\n        {bannerData.title}\n      </SimpleCell>\n\n      {currentPixel.length > 0 && (\n        <div className={styles['PromoBanner__pixels']}>\n          <img src={currentPixel} alt=\"\" />\n        </div>\n      )}\n    </RootComponent>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}