{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { Icon24Cancel } from \"@vkontakte/icons\";\nimport { classNames, noop } from \"@vkontakte/vkjs\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { getTitleFromChildren } from \"../../lib/utils\";\nimport { IconButton } from \"../IconButton/IconButton\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { Tappable } from \"../Tappable/Tappable\";\n/**\n * @see https://vkcom.github.io/VKUI/#/RemovableIos\n */\n\nvar RemovableIos = function (param) {\n  var onRemove = param.onRemove,\n      removePlaceholder = param.removePlaceholder,\n      removePlaceholderString = param.removePlaceholderString,\n      childrenProp = param.children;\n  var window = useDOM().window;\n  var removeButtonRef = React.useRef(null);\n  var disabledRef = React.useRef(true);\n\n  var _React_useState = _sliced_to_array(React.useState(0), 2),\n      removeOffset = _React_useState[0],\n      updateRemoveOffset = _React_useState[1];\n\n  useGlobalEventListener(window, \"click\", function () {\n    if (removeOffset > 0) {\n      updateRemoveOffset(0);\n    }\n  }, {\n    capture: true\n  });\n\n  var onRemoveTransitionEnd = function () {\n    if (removeOffset > 0) {\n      var _removeButtonRef_current;\n\n      removeButtonRef === null || removeButtonRef === void 0 ? void 0 : (_removeButtonRef_current = removeButtonRef.current) === null || _removeButtonRef_current === void 0 ? void 0 : _removeButtonRef_current.focus();\n    } else {\n      disabledRef.current = true;\n    }\n  };\n\n  var onRemoveActivateClick = function (e) {\n    e.stopPropagation();\n\n    if (!removeButtonRef.current) {\n      return;\n    }\n\n    var offsetWidth = removeButtonRef.current.offsetWidth;\n    disabledRef.current = false;\n    updateRemoveOffset(offsetWidth);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiRemovable__content\", \"vkuiInternalRemovable__content\"),\n    style: {\n      transform: \"translateX(-\".concat(removeOffset !== null && removeOffset !== void 0 ? removeOffset : 0, \"px)\")\n    },\n    onTransitionEnd: onRemoveTransitionEnd\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    hasActive: false,\n    hasHover: false,\n    \"aria-label\": removePlaceholderString,\n    className: classNames(\"vkuiRemovable__action\", \"vkuiRemovable__toggle\", \"vkuiInternalRemovable__action\"),\n    onClick: onRemoveActivateClick,\n    disabled: removeOffset > 0\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"vkuiRemovable__toggle-in\",\n    role: \"presentation\"\n  })), typeof childrenProp === \"function\" ? childrenProp({\n    isRemoving: removeOffset > 0\n  }) : childrenProp, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__offset\",\n    \"aria-hidden\": true\n  }), /*#__PURE__*/React.createElement(Tappable, {\n    Component: \"button\",\n    hasActive: false,\n    hasHover: false,\n    disabled: disabledRef.current,\n    getRootRef: removeButtonRef,\n    className: \"vkuiRemovable__remove\",\n    onClick: onRemove\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__remove-in\"\n  }, removePlaceholder)));\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/Removable\n */\n\n\nexport var Removable = function (_param) {\n  var children = _param.children,\n      _param_onRemove = _param.onRemove,\n      onRemove = _param_onRemove === void 0 ? noop : _param_onRemove,\n      _param_removePlaceholder = _param.removePlaceholder,\n      removePlaceholder = _param_removePlaceholder === void 0 ? \"Удалить\" : _param_removePlaceholder,\n      _param_align = _param.align,\n      align = _param_align === void 0 ? \"center\" : _param_align,\n      _param_indent = _param.indent,\n      indent = _param_indent === void 0 ? false : _param_indent,\n      restProps = _object_without_properties(_param, [\"children\", \"onRemove\", \"removePlaceholder\", \"align\", \"indent\"]);\n\n  var platform = usePlatform();\n\n  var onRemoveClick = function (e) {\n    e.preventDefault();\n    onRemove(e);\n  };\n\n  var removePlaceholderString = getTitleFromChildren(removePlaceholder);\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    baseClassName: classNames(platform === Platform.IOS && \"vkuiRemovable--ios\", align === \"start\" && \"vkuiRemovable--align-start\", indent && \"vkuiRemovable--indent\")\n  }), platform !== Platform.IOS && /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiRemovable__content\", \"vkuiInternalRemovable__content\")\n  }, children, /*#__PURE__*/React.createElement(IconButton, {\n    activeMode: \"opacity\",\n    hoverMode: \"opacity\",\n    className: classNames(\"vkuiRemovable__action\", \"vkuiInternalRemovable__action\"),\n    onClick: onRemoveClick,\n    \"aria-label\": removePlaceholderString\n  }, /*#__PURE__*/React.createElement(Icon24Cancel, {\n    role: \"presentation\"\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__offset\",\n    \"aria-hidden\": true\n  })), platform === Platform.IOS && /*#__PURE__*/React.createElement(RemovableIos, {\n    onRemove: onRemoveClick,\n    removePlaceholder: removePlaceholder,\n    removePlaceholderString: removePlaceholderString\n  }, children));\n};","map":{"version":3,"mappings":"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","names":["React","Icon24Cancel","classNames","noop","useGlobalEventListener","usePlatform","useDOM","Platform","getTitleFromChildren","IconButton","RootComponent","Tappable","RemovableIos","onRemove","removePlaceholder","removePlaceholderString","children","childrenProp","window","removeButtonRef","useRef","disabledRef","useState","removeOffset","updateRemoveOffset","capture","onRemoveTransitionEnd","current","focus","onRemoveActivateClick","e","stopPropagation","offsetWidth","div","className","style","transform","concat","onTransitionEnd","hasActive","hasHover","aria-label","onClick","disabled","i","role","isRemoving","span","aria-hidden","Component","getRootRef","Removable","_param_removePlaceholder","_param_align","align","_param_indent","indent","restProps","platform","onRemoveClick","preventDefault","baseClassName","IOS","activeMode","hoverMode"],"sources":["C:\\Users\\kulag\\vk\\Ability\\node_modules\\@vkontakte\\vkui\\src\\components\\Removable\\Removable.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon24Cancel } from '@vkontakte/icons';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { getTitleFromChildren } from '../../lib/utils';\nimport { HasChildren, HTMLAttributesWithRootRef } from '../../types';\nimport { IconButton } from '../IconButton/IconButton';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Tappable } from '../Tappable/Tappable';\nimport styles from './Removable.module.css';\n\nexport interface RemovableProps {\n  /**\n   * iOS only. Текст в выезжающей кнопке для удаления ячейки.\n   */\n  removePlaceholder?: React.ReactNode;\n  /**\n   * Коллбэк срабатывает при клике на контрол удаления.\n   */\n  onRemove?: (e: React.MouseEvent, rootEl?: HTMLElement | null) => void;\n}\n\ninterface RemovableIosOwnProps extends RemovableProps, HasChildren {\n  removePlaceholderString?: string;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/RemovableIos\n */\nconst RemovableIos = ({\n  onRemove,\n  removePlaceholder,\n  removePlaceholderString,\n  children: childrenProp,\n}: RemovableIosOwnProps) => {\n  const { window } = useDOM();\n\n  const removeButtonRef = React.useRef<HTMLElement>(null);\n  const disabledRef = React.useRef(true);\n  const [removeOffset, updateRemoveOffset] = React.useState(0);\n\n  useGlobalEventListener(\n    window,\n    'click',\n    () => {\n      if (removeOffset > 0) {\n        updateRemoveOffset(0);\n      }\n    },\n    { capture: true },\n  );\n\n  const onRemoveTransitionEnd = () => {\n    if (removeOffset > 0) {\n      removeButtonRef?.current?.focus();\n    } else {\n      disabledRef.current = true;\n    }\n  };\n\n  const onRemoveActivateClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!removeButtonRef.current) {\n      return;\n    }\n    const { offsetWidth } = removeButtonRef.current;\n    disabledRef.current = false;\n    updateRemoveOffset(offsetWidth);\n  };\n\n  return (\n    <div\n      className={classNames(styles['Removable__content'], 'vkuiInternalRemovable__content')}\n      style={{ transform: `translateX(-${removeOffset ?? 0}px)` }}\n      onTransitionEnd={onRemoveTransitionEnd}\n    >\n      <IconButton\n        hasActive={false}\n        hasHover={false}\n        aria-label={removePlaceholderString}\n        className={classNames(\n          styles['Removable__action'],\n          styles['Removable__toggle'],\n          'vkuiInternalRemovable__action',\n        )}\n        onClick={onRemoveActivateClick}\n        disabled={removeOffset > 0}\n      >\n        <i className={styles['Removable__toggle-in']} role=\"presentation\" />\n      </IconButton>\n      {typeof childrenProp === 'function'\n        ? childrenProp({ isRemoving: removeOffset > 0 })\n        : childrenProp}\n\n      <span className={styles['Removable__offset']} aria-hidden />\n\n      <Tappable\n        Component=\"button\"\n        hasActive={false}\n        hasHover={false}\n        disabled={disabledRef.current}\n        getRootRef={removeButtonRef}\n        className={styles['Removable__remove']}\n        onClick={onRemove}\n      >\n        <span className={styles['Removable__remove-in']}>{removePlaceholder}</span>\n      </Tappable>\n    </div>\n  );\n};\n\ninterface RemovableIosRenderProps {\n  /**\n   * Показывает состояние Removable на платформе iOS при клике на иконку удаления.\n   * Для имитации поведения на iOS при клике на иконку удаления самого удаление не происходит,\n   * контент сдвигается влево и справа выезжает настоящая кнопка \"Удалить\".\n   * Когда контент сдвинут `isRemoving = true`.\n   */\n  isRemoving: boolean;\n}\n\ninterface RemovableOwnProps extends HTMLAttributesWithRootRef<HTMLDivElement>, RemovableProps {\n  /**\n   * Расположение кнопки удаления.\n   */\n  align?: 'start' | 'center';\n  /**\n   * Скрывает кнопку, но оставляет отступ.\n   * @since 5.4.0\n   */\n  indent?: boolean;\n  children?: React.ReactNode | ((renderProps: RemovableIosRenderProps) => React.ReactNode);\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Removable\n */\nexport const Removable = ({\n  children,\n  onRemove = noop,\n  removePlaceholder = 'Удалить',\n  align = 'center',\n  indent = false,\n  ...restProps\n}: RemovableOwnProps) => {\n  const platform = usePlatform();\n\n  const onRemoveClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    onRemove(e);\n  };\n\n  const removePlaceholderString: string = getTitleFromChildren(removePlaceholder);\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        platform === Platform.IOS && styles['Removable--ios'],\n        align === 'start' && styles['Removable--align-start'],\n        indent && styles['Removable--indent'],\n      )}\n    >\n      {platform !== Platform.IOS && (\n        <div className={classNames(styles['Removable__content'], 'vkuiInternalRemovable__content')}>\n          {children}\n\n          <IconButton\n            activeMode=\"opacity\"\n            hoverMode=\"opacity\"\n            className={classNames(styles['Removable__action'], 'vkuiInternalRemovable__action')}\n            onClick={onRemoveClick}\n            aria-label={removePlaceholderString}\n          >\n            <Icon24Cancel role=\"presentation\" />\n          </IconButton>\n\n          <span className={styles['Removable__offset']} aria-hidden />\n        </div>\n      )}\n\n      {platform === Platform.IOS && (\n        <RemovableIos\n          onRemove={onRemoveClick}\n          removePlaceholder={removePlaceholder}\n          removePlaceholderString={removePlaceholderString}\n        >\n          {children}\n        </RemovableIos>\n      )}\n    </RootComponent>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}